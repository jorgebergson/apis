{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"O que \u00e9 a API Consulta NFe? Os servi\u00e7os da api NFe s\u00e3o disponibilizados atrav\u00e9s do HTTP REST, oferecendo opera\u00e7\u00f5es de consulta \u00e0s Notas Fiscais Eletr\u00f4nicas e tamb\u00e9m permitindo a monitora\u00e7\u00e3o de uma NFe atrav\u00e9s do servi\u00e7o Push NFe. Como funciona? Para consulta a uma Nota Fiscal Eletr\u00f4nica, o interessado envia o n\u00famero da NFe e a API retorna os dados que constam nessa NFe. \u00c9 poss\u00edvel tamb\u00e9m o cadastro, atualiza\u00e7\u00e3o e consulta de clientes consumidores dos servi\u00e7os Push NFe, os quais poder\u00e3o incluir, excluir e consultar uma solicita\u00e7\u00e3o de monitora\u00e7\u00e3o de Notas Fiscis Eletr\u00f4nicas. Mais informa\u00e7\u00f5es Interessado? Para mais informa\u00e7\u00f5es sobre a api NFe e outros servi\u00e7os, acesse a p\u00e1gina da Plataforma de Intelig\u00eancia de Neg\u00f3cios do SERPRO . Servi\u00e7o Push NF-E O cliente recebe uma notifica\u00e7\u00e3o, informando que determina NF-e j\u00e1 inclu\u00edda em uma solici\u00e7\u00e3o de monitora\u00e7\u00e3o teve atualiza\u00e7\u00e3o. O cliente deve implementar em sua aplica\u00e7\u00e3o o tratamento dos m\u00e9todos Push.","title":"Home"},{"location":"#o-que-e-a-api-consulta-nfe","text":"Os servi\u00e7os da api NFe s\u00e3o disponibilizados atrav\u00e9s do HTTP REST, oferecendo opera\u00e7\u00f5es de consulta \u00e0s Notas Fiscais Eletr\u00f4nicas e tamb\u00e9m permitindo a monitora\u00e7\u00e3o de uma NFe atrav\u00e9s do servi\u00e7o Push NFe.","title":"O que \u00e9 a API Consulta NFe?"},{"location":"#como-funciona","text":"Para consulta a uma Nota Fiscal Eletr\u00f4nica, o interessado envia o n\u00famero da NFe e a API retorna os dados que constam nessa NFe. \u00c9 poss\u00edvel tamb\u00e9m o cadastro, atualiza\u00e7\u00e3o e consulta de clientes consumidores dos servi\u00e7os Push NFe, os quais poder\u00e3o incluir, excluir e consultar uma solicita\u00e7\u00e3o de monitora\u00e7\u00e3o de Notas Fiscis Eletr\u00f4nicas.","title":"Como funciona?"},{"location":"#mais-informacoes","text":"Interessado? Para mais informa\u00e7\u00f5es sobre a api NFe e outros servi\u00e7os, acesse a p\u00e1gina da Plataforma de Intelig\u00eancia de Neg\u00f3cios do SERPRO .","title":"Mais informa\u00e7\u00f5es"},{"location":"#servico-push-nf-e","text":"O cliente recebe uma notifica\u00e7\u00e3o, informando que determina NF-e j\u00e1 inclu\u00edda em uma solici\u00e7\u00e3o de monitora\u00e7\u00e3o teve atualiza\u00e7\u00e3o. O cliente deve implementar em sua aplica\u00e7\u00e3o o tratamento dos m\u00e9todos Push.","title":"Servi\u00e7o Push NF-E"},{"location":"en/","text":"What is the NFe Query API? Api NFe's services are available through HTTP REST, offering electronic Invoice consultation operations and also allowing the monitoring of an NFe through the Push NFe service. How it works? To consult an Electronic Invoice, the interested party sends the NFe number and the API returns the data contained in that NFe. It is also possible to register, update and consult customers who are consumers of Push NFe services, which may include, exclude and consult a request for monitoring Electronic Tax Notes. More information Interested? For more information about the NFe api and other services, visit the SERPRO Business Intelligence Platform page . Push Service NF-E The customer receives a notification, stating that it determines NF-e already included in a monitoring request has been updated. The client must implement the treatment of Push methods in its application.","title":"Introduction"},{"location":"en/#what-is-the-nfe-query-api","text":"Api NFe's services are available through HTTP REST, offering electronic Invoice consultation operations and also allowing the monitoring of an NFe through the Push NFe service.","title":"What is the NFe Query API?"},{"location":"en/#how-it-works","text":"To consult an Electronic Invoice, the interested party sends the NFe number and the API returns the data contained in that NFe. It is also possible to register, update and consult customers who are consumers of Push NFe services, which may include, exclude and consult a request for monitoring Electronic Tax Notes.","title":"How it works?"},{"location":"en/#more-information","text":"Interested? For more information about the NFe api and other services, visit the SERPRO Business Intelligence Platform page .","title":"More information"},{"location":"en/#push-service-nf-e","text":"The customer receives a notification, stating that it determines NF-e already included in a monitoring request has been updated. The client must implement the treatment of Push methods in its application.","title":"Push Service NF-E"},{"location":"en/api_reference/","text":"","title":"Api reference"},{"location":"en/carimbo_tempo/","text":"Time stamp Requesting signature with Time Stamp If you want your request to come with a Time Stamp signature, simply include, in the header of your request, the information x-signature: 1. The signature will be returned in the response header, with the name stamp . Checking signature with time stamp To verify time stamp signature, follow the instructions in the Verifies Time Stamp API documentation .","title":"Time Stamp Requests"},{"location":"en/carimbo_tempo/#time-stamp","text":"","title":"Time stamp"},{"location":"en/carimbo_tempo/#requesting-signature-with-time-stamp","text":"If you want your request to come with a Time Stamp signature, simply include, in the header of your request, the information x-signature: 1. The signature will be returned in the response header, with the name stamp .","title":"Requesting signature with Time Stamp"},{"location":"en/carimbo_tempo/#checking-signature-with-time-stamp","text":"To verify time stamp signature, follow the instructions in the Verifies Time Stamp API documentation .","title":"Checking signature with time stamp"},{"location":"en/codigos_retorno/","text":"Return codes Requests to the NFE API can return the following HTTP code: Non-ticketed codes The codes 400 (Invalid request) and 500 (Internal server error) will not be ticketed on billing. Code / Responses 200 OK Everything worked as expected and the data was validated successfully. 206 Partial Content The information was returned, but not completely. 400 Invalid request The NFE number entered is not valid. 401 Not authorized Problems during authentication. 403 forbidden This error occurs when there is a wrong path in the request. Make sure to call the API as follows: \"https://apigateway.serpro.gov.br/consulta-NFE-df/v1/NFE/{ni}\" 404 Not found There is no NFE with the registration number informed. 500 Server error An internal server error has occurred. 504 Gateway Timeout There was a network error and the gateway did not respond in time. The request did not reach the API Consulta NFE.","title":"Return codes"},{"location":"en/codigos_retorno/#return-codes","text":"Requests to the NFE API can return the following HTTP code: Non-ticketed codes The codes 400 (Invalid request) and 500 (Internal server error) will not be ticketed on billing.","title":"Return codes"},{"location":"en/codigos_retorno/#code-responses","text":"","title":"Code / Responses"},{"location":"en/codigos_retorno/#200-ok","text":"Everything worked as expected and the data was validated successfully.","title":"200 OK"},{"location":"en/codigos_retorno/#206-partial-content","text":"The information was returned, but not completely.","title":"206 Partial Content"},{"location":"en/codigos_retorno/#400-invalid-request","text":"The NFE number entered is not valid.","title":"400 Invalid request"},{"location":"en/codigos_retorno/#401-not-authorized","text":"Problems during authentication.","title":"401 Not authorized"},{"location":"en/codigos_retorno/#403-forbidden","text":"This error occurs when there is a wrong path in the request. Make sure to call the API as follows: \"https://apigateway.serpro.gov.br/consulta-NFE-df/v1/NFE/{ni}\"","title":"403 forbidden"},{"location":"en/codigos_retorno/#404-not-found","text":"There is no NFE with the registration number informed.","title":"404 Not found"},{"location":"en/codigos_retorno/#500-server-error","text":"An internal server error has occurred.","title":"500 Server error"},{"location":"en/codigos_retorno/#504-gateway-timeout","text":"There was a network error and the gateway did not respond in time. The request did not reach the API Consulta NFE.","title":"504 Gateway Timeout"},{"location":"en/como_contratar/","text":"How to hire Api Nota Fisca Eletr\u00f4nica can be hired by companies of any size, class entities or economic groups and public institutions (federal, state and municipal). Has interest? Visit the Business Intelligence Platform page SERPRO, and click on \"Meet the Consultations\". Step by step for hiring Prerequisite It is necessary to use the e-CNPJ digital certificate. Click on \"I want to hire\" on the Mass Consultation NFe page If you already have your Serpro registration, enter your login and password. Otherwise, create your account to proceed with the hiring process. Follow the hiring flow. After signing the contract, within 10 minutes you will have access to the Client Area (cliente.serpro.gov.br), where you can view the service access keys. Now just make adjustments to your application and use the service. To see your usage history, access the Client Area. Private companies without e-CNPJ We strongly recommend the use of a digital certificate, with which the online hiring process can be done. For customers who do not have a digital certificate, exceptionally, the request can be made through this form . In this process, hiring takes longer, as it follows a manual procedure. Public bodies If you have not yet contacted Serpro, access the government contract form , fill in the data and choose Serpro API. At the end of the registration, our service team receives the request and will appoint a person to contact you. If you already have your Business Consultant at Serpro, simply request the contract. Class entities It follows the same flow of public agencies. Access our contact form , fill in the data and choose Serpro API. At the end of the registration, our service team receives the request and will escalate a person to contact Economic Groups When there is more than one CNPJ of the same entity that needs to use the application, instead of making the contract one by one, it is possible to make a global contract, with successive adhesions by the other entities. Access our service form and our service team will contact you. How to cancel The contract can be canceled at any time, by a simple expression of will through our Call Center .","title":"How to hire"},{"location":"en/como_contratar/#how-to-hire","text":"Api Nota Fisca Eletr\u00f4nica can be hired by companies of any size, class entities or economic groups and public institutions (federal, state and municipal). Has interest? Visit the Business Intelligence Platform page SERPRO, and click on \"Meet the Consultations\".","title":"How to hire"},{"location":"en/como_contratar/#step-by-step-for-hiring","text":"Prerequisite It is necessary to use the e-CNPJ digital certificate. Click on \"I want to hire\" on the Mass Consultation NFe page If you already have your Serpro registration, enter your login and password. Otherwise, create your account to proceed with the hiring process. Follow the hiring flow. After signing the contract, within 10 minutes you will have access to the Client Area (cliente.serpro.gov.br), where you can view the service access keys. Now just make adjustments to your application and use the service. To see your usage history, access the Client Area.","title":"Step by step for hiring"},{"location":"en/como_contratar/#private-companies-without-e-cnpj","text":"We strongly recommend the use of a digital certificate, with which the online hiring process can be done. For customers who do not have a digital certificate, exceptionally, the request can be made through this form . In this process, hiring takes longer, as it follows a manual procedure.","title":"Private companies without e-CNPJ"},{"location":"en/como_contratar/#public-bodies","text":"If you have not yet contacted Serpro, access the government contract form , fill in the data and choose Serpro API. At the end of the registration, our service team receives the request and will appoint a person to contact you. If you already have your Business Consultant at Serpro, simply request the contract.","title":"Public bodies"},{"location":"en/como_contratar/#class-entities","text":"It follows the same flow of public agencies. Access our contact form , fill in the data and choose Serpro API. At the end of the registration, our service team receives the request and will escalate a person to contact","title":"Class entities"},{"location":"en/como_contratar/#economic-groups","text":"When there is more than one CNPJ of the same entity that needs to use the application, instead of making the contract one by one, it is possible to make a global contract, with successive adhesions by the other entities. Access our service form and our service team will contact you.","title":"Economic Groups"},{"location":"en/como_contratar/#how-to-cancel","text":"The contract can be canceled at any time, by a simple expression of will through our Call Center .","title":"How to cancel"},{"location":"en/demonstracao/","text":"Demonstration","title":"Demonstration"},{"location":"en/demonstracao/#demonstration","text":"","title":"Demonstration"},{"location":"en/faq/","text":"Frequently asked questions- FAQ I want more information about the NFE API, where to find it? Access the the SERPRO Business Intelligence Platform page for more information about the service. I want to hire the NFE API, how do I do it? Access our step by step explaining how to hire . I hired the NFE API, where do I get information to use the service? Your contract information, such as contract activation status, Consumer key , Consumer secret , endpoint to be consumed, link to documentation, are in your customer area at https://cliente.serpro.gov.br Which calls are charged in the NFE API? All requests that return code 200, 206 or 404 will be ticketed. To see which codes are returned by the NFE API, visit the return codes .","title":"Doubts faq"},{"location":"en/faq/#frequently-asked-questions-faq","text":"","title":"Frequently asked questions- FAQ"},{"location":"en/faq/#i-want-more-information-about-the-nfe-api-where-to-find-it","text":"Access the the SERPRO Business Intelligence Platform page for more information about the service.","title":"I want more information about the NFE API, where to find it?"},{"location":"en/faq/#i-want-to-hire-the-nfe-api-how-do-i-do-it","text":"Access our step by step explaining how to hire .","title":"I want to hire the NFE API, how do I do it?"},{"location":"en/faq/#i-hired-the-nfe-api-where-do-i-get-information-to-use-the-service","text":"Your contract information, such as contract activation status, Consumer key , Consumer secret , endpoint to be consumed, link to documentation, are in your customer area at https://cliente.serpro.gov.br","title":"I hired the NFE API, where do I get information to use the service?"},{"location":"en/faq/#which-calls-are-charged-in-the-nfe-api","text":"All requests that return code 200, 206 or 404 will be ticketed. To see which codes are returned by the NFE API, visit the return codes .","title":"Which calls are charged in the NFE API?"},{"location":"en/identificador_requisicoes/","text":"Optional Request Identifier Request header field (X-Request-Tag) This field is optional when using API calls and serves as a request identifier. If a company needs, for example, to group the number of requests made by each department, it can use this field in order to identify in the billing the number of requests for each group item. The field is free text (string up to 32 characters) and has no content validation. Therefore, it is up to the customer to keep track of the information that is sent to this field so that the billing report makes the appropriate grouping. This attribute can be used by the class entity and / or economic group in the global modality, with an entity charge for the purposes of identifying the associate who makes the request. In the case of class entities or economic groups that carry out the contract at a cost to the member, it is not necessary to carry out the grouping, as each member will have his own consumption key.","title":"Optional Request Identifier"},{"location":"en/identificador_requisicoes/#optional-request-identifier","text":"","title":"Optional Request Identifier"},{"location":"en/identificador_requisicoes/#request-header-field-x-request-tag","text":"This field is optional when using API calls and serves as a request identifier. If a company needs, for example, to group the number of requests made by each department, it can use this field in order to identify in the billing the number of requests for each group item. The field is free text (string up to 32 characters) and has no content validation. Therefore, it is up to the customer to keep track of the information that is sent to this field so that the billing report makes the appropriate grouping. This attribute can be used by the class entity and / or economic group in the global modality, with an entity charge for the purposes of identifying the associate who makes the request. In the case of class entities or economic groups that carry out the contract at a cost to the member, it is not necessary to carry out the grouping, as each member will have his own consumption key.","title":"Request header field (X-Request-Tag)"},{"location":"en/leiautes_formatos/","text":"Layouts and Formats The NF-e information provided is in accordance with the NF-e layout, made available by the National Meeting of State Tax Coordinators and Administrators (ENCAT). The Technical Notes with the layout information of the NF-e can be found in this [ENCAT] link(http://www.nfe.fazenda.gov.br/portal/listaConteudo.aspx?tipoConteudo=tW+YMyk/50s=). The structure of the return Json follows the same specifications as the XML schematics of the Web Services, available at the link NF-e . Numeric type fields will be returned in Json in FORMAT NUMBER . And if the numerical value of the field is too large, the return may appear in json in the SCIENTIFIC NOTATION FORMAT . It is up to the application that consumes the API service to give the appropriate treatment for numeric fields.","title":"Layouts and Formats"},{"location":"en/leiautes_formatos/#layouts-and-formats","text":"The NF-e information provided is in accordance with the NF-e layout, made available by the National Meeting of State Tax Coordinators and Administrators (ENCAT). The Technical Notes with the layout information of the NF-e can be found in this [ENCAT] link(http://www.nfe.fazenda.gov.br/portal/listaConteudo.aspx?tipoConteudo=tW+YMyk/50s=). The structure of the return Json follows the same specifications as the XML schematics of the Web Services, available at the link NF-e . Numeric type fields will be returned in Json in FORMAT NUMBER . And if the numerical value of the field is too large, the return may appear in json in the SCIENTIFIC NOTATION FORMAT . It is up to the application that consumes the API service to give the appropriate treatment for numeric fields.","title":"Layouts and Formats"},{"location":"en/quick_start/","text":"Quick Guides How to authenticate in the NFe Consultation API The APIs made available by the API SERPRO platform use the OAuth2 protocol to perform the authentication and access authorization of the contracted APIs. Follow the steps below to authenticate and consume the NFe api. 1. Step One - Get Consumer Key e Consumer Secret To consume the APIs, you must use both codes (Consumer Key e Consumer Secret) available in the Client Area. These codes are used to identify the contract. Access credentials must be obtained from the \u00e1rea do cliente Serpro . Code examples: Consumer Key: djaR21PGoYp1iyK2n2ACOH9REdUb Consumer Secret: ObRsAJWOL4fv2Tp27D1vd8fB3Ote Important warning Consumer Key and Consumer Secret identify their user and their contract with SERPRO. Keep this information protected. 2. Second step - Request the Bearer Token To consult the APIs, it is necessary to obtain a temporary access token (Bearer). This token has an expiration time and whenever it expires, this step of requesting a new access token must be repeated. How to request the Access Token (Bearer) To request the temporary token it is necessary to make an HTTP POST request to the Token endpoint https://apigateway.serpro.gov.br/token, informing the access credentials (consumerKey: consumerSecret) in HTTP Header Authorization, in base64 format, as shown below. [ HEAD ] Authorization : Basic base64 ( Consumer Key : Consumer Secret ) [ HEAD ] Content - Type : application / x - www - form - urlencoded [ POST ] grant_type = client_credentials For use in the * Authorization * parameter, it is necessary to concatenate the Consumer Key and Consumer Secret codes, separated by the character \":\", and convert the result to BASE64. In the following example, the string is returned ZGphUjIx[...]IzT3RlCg : echo -n \"djaR21PGoYp1iyK2n2ACOH9REdUb:ObRsAJWOL4fv2Tp27D1vd8fB3Ote\" | base64 Result: ZGphUjIxUEdvWXAxaXlLMm4yQUNPSDlSRWRVYjpPYlJzQUpXT0w0ZnYyVHAyN0QxdmQ4ZkIzT3RlCg Below is an example of a call via cUrl: curl -k -d \"grant_type=client_credentials\" \\ -H \"Authorization: Basic ZGphUjIxUEdvWXAxaXlLMm4yQUNPSDlSRWRVYjpPYlJzQUpXT0w0ZnYyVHAyN0QxdmQ4ZkIzT3RlCg\" \\ https://apigateway.serpro.gov.br/token Content-type If you experience errors\"415 Unsupported Media Type\" in the Token request call, use the \"Content-Type\" Header field with the value \"application/x-www-form-urlencoded\" [HEAD] Content-type: \"application/x-www-form-urlencoded\" 3. Third step - Receive the Token As a result of the previous step, the endpoint will inform the API access token, in the access_token field of the return json message. This token must be informed in the next steps. Receive the Token As a result, the endpoint will inform the API access token, in the access_token field of the return json message. This token must be informed in the next steps. { \"scope\" : \"am_application_scope default\" , \"token_type\" : \"Bearer\" , \"expires_in\" : 3295 , \"access_token\" : \"c66a7def1c96f7008a0c397dc588b6d7\" } Access Token Renewal Note that whenever the temporary access token expires, the gateway will return an HTTP CODE 401 after making a request to an API. In this case, the Second Step must be repeated How to request the Access Token (Bearer) to generate a new temporary access token. 4. Step four - Making a request Querying the APIs In possession of the Access Token, make the request to the NFe Trial API. curl -X GET \"https://apigateway.serpro.gov.br/consulta-nfe-trial/v1/nfe/35170608530528000184550000000154301000771561\" \\ -H \"accept: application/json\" \\ -H \"Authorization: Bearer 4e1a1858bdd584fdc077fb7d80f39283\" \\ In the example above, the following parameters were used: [HEADER] Accept: application/json We inform the type of data we are requesting, in this case JSON [HEADER] Authorization: Bearer 4e1a1858bdd584fdc077fb7d80f39283 We inform the access token received [GET] https://apigateway.serpro.gov.br/consulta-nfe-trial/v1/nfe/35170608530528000184550000000154301000771561 We call the API url and the desired method. In this case, the base url is \"https://apigateway.serpro.gov.br/consulta-nfe-df-trial/v1/\u201d, and the method is the \"nfe/35170608530528000184550000000154301000771561\". Example of expected response: { \"nfeProc\" : { \"protNFe\" : { \"infProt\" : { \"chNFe\" : \"35170608530528000184550000000154301000771561\" } }, \"NFe\" : { \"infNFe\" : { \"infAdic\" : { \"infCpl\" : \"N/PED.: 051542;VL. APRX. TRIB.(FONTE IBPT): ****254.19 **34.12 %\" }, \"det\" : [ { \"nItem\" : 1 , \"prod\" : { \"cEAN\" : \"\" , \"cProd\" : 346 , \"qCom\" : 5 , \"cEANTrib\" : \"\" , \"vUnTrib\" : 149 , \"qTrib\" : 5 , \"vProd\" : 745 , \"xProd\" : \"SULFITE A4 75GR BOREAL (5000FLS)\" , \"vUnCom\" : 149 , \"indTot\" : 1 , \"uTrib\" : \"RS\" , \"NCM\" : 48025610 , \"uCom\" : \"RS\" , \"CFOP\" : 5102 , \"CEST\" : 9999999 }, \"imposto\" : { \"vTotTrib\" : 254.19 , \"ICMS\" : { \"ICMS00\" : { \"modBC\" : 0 , \"orig\" : 0 , \"CST\" : \"00\" , \"vBC\" : 745 , \"vICMS\" : 134.1 , \"pICMS\" : 18 } }, \"COFINS\" : { \"COFINSAliq\" : { \"vCOFINS\" : 22.35 , \"CST\" : \"01\" , \"vBC\" : 745 , \"pCOFINS\" : 3 } }, \"PIS\" : { \"PISAliq\" : { \"vPIS\" : 4.84 , \"CST\" : \"01\" , \"vBC\" : 745 , \"pPIS\" : 0.65 } } } } ], \"total\" : { \"ICMSTot\" : { \"vCOFINS\" : 22.35 , \"vBCST\" : 0 , \"vICMSDeson\" : 0 , \"vProd\" : 745 , \"vSeg\" : 0 , \"vNF\" : 745 , \"vTotTrib\" : 254.19 , \"vPIS\" : 4.84 , \"vBC\" : 745 , \"vST\" : 0 , \"vICMS\" : 134.1 , \"vII\" : 0 , \"vDesc\" : 0 , \"vOutro\" : 0 , \"vIPI\" : 0 , \"vFrete\" : 0 } }, \"cobr\" : { \"dup\" : [ { \"dVenc\" : \"2017-07-05\" , \"nDup\" : \"015430/A\" , \"vDup\" : 372.5 }, { \"dVenc\" : \"2017-07-20\" , \"nDup\" : \"015430/B\" , \"vDup\" : 372.5 } ] }, \"Id\" : \"NFe35170608530528000184550000000154301000771561\" , \"ide\" : { \"tpNF\" : 1 , \"mod\" : 55 , \"indPres\" : 0 , \"tpImp\" : 1 , \"nNF\" : 15430 , \"cMunFG\" : 3550308 , \"procEmi\" : 0 , \"finNFe\" : 1 , \"dhEmi\" : \"2017-06-05T08:31:06-03:00\" , \"tpAmb\" : 1 , \"indFinal\" : 1 , \"idDest\" : 1 , \"tpEmis\" : 1 , \"cDV\" : 9 , \"cUF\" : 35 , \"serie\" : 0 , \"natOp\" : \"VENDA\" , \"cNF\" : \"00077156\" , \"verProc\" : \"3.10.31\" , \"indPag\" : 1 }, \"emit\" : { \"xNome\" : \"COMERCIO DE TESTE LTDA EPP\" , \"CRT\" : 3 , \"xFant\" : \"comerciodeteste@comerciodeteste.com.br\" , \"CNPJ\" : \"56776378000136\" , \"enderEmit\" : { \"fone\" : 995551234 , \"UF\" : \"SP\" , \"xPais\" : \"BRASIL\" , \"cPais\" : 1058 , \"xLgr\" : \"AV FICTICIA\" , \"xMun\" : \"SAO PAULO\" , \"nro\" : 80 , \"cMun\" : 3550308 , \"xBairro\" : \"VILA FICTICIA\" , \"CEP\" : \"00012345\" }, \"IE\" : 123456789123 }, \"dest\" : { \"xNome\" : \"MARIA FICTICIA DOS SANTOS\" , \"CPF\" : 67879577696 , \"enderDest\" : { \"fone\" : 995551234 , \"UF\" : \"SP\" , \"xPais\" : \"BRASIL\" , \"cPais\" : 1058 , \"xLgr\" : \"AV FICTICIA, 1579\" , \"xMun\" : \"SAO PAULO\" , \"nro\" : \".\" , \"cMun\" : 3550308 , \"xBairro\" : \"SANTO AMARO FICTICIO\" , \"CEP\" : \"00033200\" }, \"indIEDest\" : 9 }, \"transp\" : { \"modFrete\" : 0 , \"vol\" : { \"pesoL\" : 116.944 , \"esp\" : \"RESMAS\" , \"qVol\" : 5 , \"pesoB\" : 116.944 }, \"transporta\" : { \"xNome\" : \"TRANSPORTADORA FICTICIA\" } } } }, \"versao\" : 3.1 } } IMPORTANT The above API NFe Consult query is for demonstration purposes only. The available APIs and their respective URLs (endpoints) for consumption are available (through the documentation of their respective swaggers) in the section API Reference . How to use the NFe Demo API API NFe Demo is the testing environment of the NFe API, with sample data (Mock), in order to demonstrate the API's operation. To use it: Access the NFe Demo API Choose the method (endpoint) to test click in Try it Out Insert the headings you want and/or change the content of the request body click in Execute Test data To test the Trial environment, use one of the fictional NFe listed below: Key Comments 35170608530528000184550000000154301000771561 35161147508411011603551000077959551093041003 53131205035672000156550010000004991543410167 42140612687276000179550010001505671172228752 35140903608306000202555000001100251571436929 53150337992500000167550010000029521000029516 31150917591579000107550010000014321081035918 35151200991908000104550020000063951000184833 31160906347409006953550110008369841081956475 31170309339936000973550250002397736362483965 35160900623904000335550010028792431858713854 35170300776574000156550020009091941178378523 53160911510448000171550010000106771000187760 52160819015622000111550010000007051300828370 53160621182711000102550010000012921000042921 52160609303953000101550010000008711000045330 53151205642646000196550010000287891000219878 53160713453539000148550010000009101000070190 52151013766790000162550010000028401250000010 53160705642646000196550010000298141000284189 52160400945852000151550010000041771020601080 24190201243220000109550010000007251000007252 24190420412822000197550010000004701000001816 25190400785860000188550010000000061000000868 29190332994770000193550020000000107000000124 33190403282458000179550010001434641841176079 87878774456468954646464654654546545446579312 This NFe has all the arrays","title":"Quick Guides"},{"location":"en/quick_start/#quick-guides","text":"","title":"Quick Guides"},{"location":"en/quick_start/#how-to-authenticate-in-the-nfe-consultation-api","text":"The APIs made available by the API SERPRO platform use the OAuth2 protocol to perform the authentication and access authorization of the contracted APIs. Follow the steps below to authenticate and consume the NFe api.","title":"How to authenticate in the NFe Consultation API"},{"location":"en/quick_start/#1-step-one-get-consumer-key-e-consumer-secret","text":"To consume the APIs, you must use both codes (Consumer Key e Consumer Secret) available in the Client Area. These codes are used to identify the contract. Access credentials must be obtained from the \u00e1rea do cliente Serpro . Code examples: Consumer Key: djaR21PGoYp1iyK2n2ACOH9REdUb Consumer Secret: ObRsAJWOL4fv2Tp27D1vd8fB3Ote Important warning Consumer Key and Consumer Secret identify their user and their contract with SERPRO. Keep this information protected.","title":"1. Step One - Get Consumer Key e Consumer Secret"},{"location":"en/quick_start/#2-second-step-request-the-bearer-token","text":"To consult the APIs, it is necessary to obtain a temporary access token (Bearer). This token has an expiration time and whenever it expires, this step of requesting a new access token must be repeated.","title":"2. Second step - Request the Bearer Token"},{"location":"en/quick_start/#how-to-request-the-access-token-bearer","text":"To request the temporary token it is necessary to make an HTTP POST request to the Token endpoint https://apigateway.serpro.gov.br/token, informing the access credentials (consumerKey: consumerSecret) in HTTP Header Authorization, in base64 format, as shown below. [ HEAD ] Authorization : Basic base64 ( Consumer Key : Consumer Secret ) [ HEAD ] Content - Type : application / x - www - form - urlencoded [ POST ] grant_type = client_credentials For use in the * Authorization * parameter, it is necessary to concatenate the Consumer Key and Consumer Secret codes, separated by the character \":\", and convert the result to BASE64. In the following example, the string is returned ZGphUjIx[...]IzT3RlCg : echo -n \"djaR21PGoYp1iyK2n2ACOH9REdUb:ObRsAJWOL4fv2Tp27D1vd8fB3Ote\" | base64 Result: ZGphUjIxUEdvWXAxaXlLMm4yQUNPSDlSRWRVYjpPYlJzQUpXT0w0ZnYyVHAyN0QxdmQ4ZkIzT3RlCg Below is an example of a call via cUrl: curl -k -d \"grant_type=client_credentials\" \\ -H \"Authorization: Basic ZGphUjIxUEdvWXAxaXlLMm4yQUNPSDlSRWRVYjpPYlJzQUpXT0w0ZnYyVHAyN0QxdmQ4ZkIzT3RlCg\" \\ https://apigateway.serpro.gov.br/token Content-type If you experience errors\"415 Unsupported Media Type\" in the Token request call, use the \"Content-Type\" Header field with the value \"application/x-www-form-urlencoded\" [HEAD] Content-type: \"application/x-www-form-urlencoded\"","title":"How to request the Access Token (Bearer)"},{"location":"en/quick_start/#3-third-step-receive-the-token","text":"As a result of the previous step, the endpoint will inform the API access token, in the access_token field of the return json message. This token must be informed in the next steps.","title":"3. Third step - Receive the Token"},{"location":"en/quick_start/#receive-the-token","text":"As a result, the endpoint will inform the API access token, in the access_token field of the return json message. This token must be informed in the next steps. { \"scope\" : \"am_application_scope default\" , \"token_type\" : \"Bearer\" , \"expires_in\" : 3295 , \"access_token\" : \"c66a7def1c96f7008a0c397dc588b6d7\" }","title":"Receive the Token"},{"location":"en/quick_start/#access-token-renewal","text":"Note that whenever the temporary access token expires, the gateway will return an HTTP CODE 401 after making a request to an API. In this case, the Second Step must be repeated How to request the Access Token (Bearer) to generate a new temporary access token.","title":"Access Token Renewal"},{"location":"en/quick_start/#4-step-four-making-a-request","text":"","title":"4. Step four - Making a request"},{"location":"en/quick_start/#querying-the-apis","text":"In possession of the Access Token, make the request to the NFe Trial API. curl -X GET \"https://apigateway.serpro.gov.br/consulta-nfe-trial/v1/nfe/35170608530528000184550000000154301000771561\" \\ -H \"accept: application/json\" \\ -H \"Authorization: Bearer 4e1a1858bdd584fdc077fb7d80f39283\" \\ In the example above, the following parameters were used: [HEADER] Accept: application/json We inform the type of data we are requesting, in this case JSON [HEADER] Authorization: Bearer 4e1a1858bdd584fdc077fb7d80f39283 We inform the access token received [GET] https://apigateway.serpro.gov.br/consulta-nfe-trial/v1/nfe/35170608530528000184550000000154301000771561 We call the API url and the desired method. In this case, the base url is \"https://apigateway.serpro.gov.br/consulta-nfe-df-trial/v1/\u201d, and the method is the \"nfe/35170608530528000184550000000154301000771561\". Example of expected response: { \"nfeProc\" : { \"protNFe\" : { \"infProt\" : { \"chNFe\" : \"35170608530528000184550000000154301000771561\" } }, \"NFe\" : { \"infNFe\" : { \"infAdic\" : { \"infCpl\" : \"N/PED.: 051542;VL. APRX. TRIB.(FONTE IBPT): ****254.19 **34.12 %\" }, \"det\" : [ { \"nItem\" : 1 , \"prod\" : { \"cEAN\" : \"\" , \"cProd\" : 346 , \"qCom\" : 5 , \"cEANTrib\" : \"\" , \"vUnTrib\" : 149 , \"qTrib\" : 5 , \"vProd\" : 745 , \"xProd\" : \"SULFITE A4 75GR BOREAL (5000FLS)\" , \"vUnCom\" : 149 , \"indTot\" : 1 , \"uTrib\" : \"RS\" , \"NCM\" : 48025610 , \"uCom\" : \"RS\" , \"CFOP\" : 5102 , \"CEST\" : 9999999 }, \"imposto\" : { \"vTotTrib\" : 254.19 , \"ICMS\" : { \"ICMS00\" : { \"modBC\" : 0 , \"orig\" : 0 , \"CST\" : \"00\" , \"vBC\" : 745 , \"vICMS\" : 134.1 , \"pICMS\" : 18 } }, \"COFINS\" : { \"COFINSAliq\" : { \"vCOFINS\" : 22.35 , \"CST\" : \"01\" , \"vBC\" : 745 , \"pCOFINS\" : 3 } }, \"PIS\" : { \"PISAliq\" : { \"vPIS\" : 4.84 , \"CST\" : \"01\" , \"vBC\" : 745 , \"pPIS\" : 0.65 } } } } ], \"total\" : { \"ICMSTot\" : { \"vCOFINS\" : 22.35 , \"vBCST\" : 0 , \"vICMSDeson\" : 0 , \"vProd\" : 745 , \"vSeg\" : 0 , \"vNF\" : 745 , \"vTotTrib\" : 254.19 , \"vPIS\" : 4.84 , \"vBC\" : 745 , \"vST\" : 0 , \"vICMS\" : 134.1 , \"vII\" : 0 , \"vDesc\" : 0 , \"vOutro\" : 0 , \"vIPI\" : 0 , \"vFrete\" : 0 } }, \"cobr\" : { \"dup\" : [ { \"dVenc\" : \"2017-07-05\" , \"nDup\" : \"015430/A\" , \"vDup\" : 372.5 }, { \"dVenc\" : \"2017-07-20\" , \"nDup\" : \"015430/B\" , \"vDup\" : 372.5 } ] }, \"Id\" : \"NFe35170608530528000184550000000154301000771561\" , \"ide\" : { \"tpNF\" : 1 , \"mod\" : 55 , \"indPres\" : 0 , \"tpImp\" : 1 , \"nNF\" : 15430 , \"cMunFG\" : 3550308 , \"procEmi\" : 0 , \"finNFe\" : 1 , \"dhEmi\" : \"2017-06-05T08:31:06-03:00\" , \"tpAmb\" : 1 , \"indFinal\" : 1 , \"idDest\" : 1 , \"tpEmis\" : 1 , \"cDV\" : 9 , \"cUF\" : 35 , \"serie\" : 0 , \"natOp\" : \"VENDA\" , \"cNF\" : \"00077156\" , \"verProc\" : \"3.10.31\" , \"indPag\" : 1 }, \"emit\" : { \"xNome\" : \"COMERCIO DE TESTE LTDA EPP\" , \"CRT\" : 3 , \"xFant\" : \"comerciodeteste@comerciodeteste.com.br\" , \"CNPJ\" : \"56776378000136\" , \"enderEmit\" : { \"fone\" : 995551234 , \"UF\" : \"SP\" , \"xPais\" : \"BRASIL\" , \"cPais\" : 1058 , \"xLgr\" : \"AV FICTICIA\" , \"xMun\" : \"SAO PAULO\" , \"nro\" : 80 , \"cMun\" : 3550308 , \"xBairro\" : \"VILA FICTICIA\" , \"CEP\" : \"00012345\" }, \"IE\" : 123456789123 }, \"dest\" : { \"xNome\" : \"MARIA FICTICIA DOS SANTOS\" , \"CPF\" : 67879577696 , \"enderDest\" : { \"fone\" : 995551234 , \"UF\" : \"SP\" , \"xPais\" : \"BRASIL\" , \"cPais\" : 1058 , \"xLgr\" : \"AV FICTICIA, 1579\" , \"xMun\" : \"SAO PAULO\" , \"nro\" : \".\" , \"cMun\" : 3550308 , \"xBairro\" : \"SANTO AMARO FICTICIO\" , \"CEP\" : \"00033200\" }, \"indIEDest\" : 9 }, \"transp\" : { \"modFrete\" : 0 , \"vol\" : { \"pesoL\" : 116.944 , \"esp\" : \"RESMAS\" , \"qVol\" : 5 , \"pesoB\" : 116.944 }, \"transporta\" : { \"xNome\" : \"TRANSPORTADORA FICTICIA\" } } } }, \"versao\" : 3.1 } } IMPORTANT The above API NFe Consult query is for demonstration purposes only. The available APIs and their respective URLs (endpoints) for consumption are available (through the documentation of their respective swaggers) in the section API Reference .","title":"Querying the APIs"},{"location":"en/quick_start/#how-to-use-the-nfe-demo-api","text":"API NFe Demo is the testing environment of the NFe API, with sample data (Mock), in order to demonstrate the API's operation. To use it: Access the NFe Demo API Choose the method (endpoint) to test click in Try it Out Insert the headings you want and/or change the content of the request body click in Execute","title":"How to use the NFe Demo API"},{"location":"en/quick_start/#test-data","text":"To test the Trial environment, use one of the fictional NFe listed below: Key Comments 35170608530528000184550000000154301000771561 35161147508411011603551000077959551093041003 53131205035672000156550010000004991543410167 42140612687276000179550010001505671172228752 35140903608306000202555000001100251571436929 53150337992500000167550010000029521000029516 31150917591579000107550010000014321081035918 35151200991908000104550020000063951000184833 31160906347409006953550110008369841081956475 31170309339936000973550250002397736362483965 35160900623904000335550010028792431858713854 35170300776574000156550020009091941178378523 53160911510448000171550010000106771000187760 52160819015622000111550010000007051300828370 53160621182711000102550010000012921000042921 52160609303953000101550010000008711000045330 53151205642646000196550010000287891000219878 53160713453539000148550010000009101000070190 52151013766790000162550010000028401250000010 53160705642646000196550010000298141000284189 52160400945852000151550010000041771020601080 24190201243220000109550010000007251000007252 24190420412822000197550010000004701000001816 25190400785860000188550010000000061000000868 29190332994770000193550020000000107000000124 33190403282458000179550010001434641841176079 87878774456468954646464654654546545446579312 This NFe has all the arrays","title":"Test data"},{"location":"en/suporte/","text":"Obter suporte Abra um acionamento","title":"Suporte"},{"location":"en/suporte/#obter-suporte","text":"Abra um acionamento","title":"Obter suporte"},{"location":"en/tipos_retornados/","text":"Types returned by the Consultation API NFe Types of Fields Returned Field types Return value NI Registration Number in the Individual Taxpayer Register, in the format 99999999999 Name Name of Individual Situation Registration Status of Individuals, formed by two fields: Code and Description. Situation/Code Code of Registration Status of Individuals Situation/Description Description of the Registration Status of Individuals Types of Registration Situations Returned Code Description 0 Regular 2 Suspended 3 Deceased Holder 4 Regularization Pending 5 Canceled by Multiplicity 8 Null 9 Canceled Craft","title":"Returned types"},{"location":"en/tipos_retornados/#types-returned-by-the-consultation-api-nfe","text":"","title":"Types returned by the Consultation API NFe"},{"location":"en/tipos_retornados/#types-of-fields-returned","text":"Field types Return value NI Registration Number in the Individual Taxpayer Register, in the format 99999999999 Name Name of Individual Situation Registration Status of Individuals, formed by two fields: Code and Description. Situation/Code Code of Registration Status of Individuals Situation/Description Description of the Registration Status of Individuals","title":"Types of Fields Returned"},{"location":"en/tipos_retornados/#types-of-registration-situations-returned","text":"Code Description 0 Regular 2 Suspended 3 Deceased Holder 4 Regularization Pending 5 Canceled by Multiplicity 8 Null 9 Canceled Craft","title":"Types of Registration Situations Returned"},{"location":"es/","text":"\u00bfQu\u00e9 es la API de consulta NFe? Los servicios de Api NFe est\u00e1n disponibles a trav\u00e9s de HTTP REST, que ofrecen operaciones para consultar Facturas electr\u00f3nicas y tambi\u00e9n permiten el monitoreo de un NFe a trav\u00e9s del servicio Push NFe. \u00bfComo funciona? Para consultar una factura electr\u00f3nica, la parte interesada env\u00eda el n\u00famero NFe y la API devuelve los datos contenidos en esa NFe. Tambi\u00e9n es posible registrar, actualizar y consultar a los clientes que son consumidores de los servicios Push NFe, que pueden incluir, excluir y consultar una solicitud para monitorear las notas fiscales electr\u00f3nicas. Mas informaciones \u00bfEst\u00e1 interesado? Para obtener m\u00e1s informaci\u00f3n sobre la API de NFe y otros servicios, visite la p\u00e1gina de la p\u00e1gina de la plataforma de inteligencia empresarial SERPRO . Servicio Push NF-E El cliente recibe una notificaci\u00f3n, indicando que determina que NF-e ya incluido en una solicitud de monitoreo ha sido actualizado. El cliente debe implementar el tratamiento de los m\u00e9todos Push en su aplicaci\u00f3n.","title":"Introduccion"},{"location":"es/#que-es-la-api-de-consulta-nfe","text":"Los servicios de Api NFe est\u00e1n disponibles a trav\u00e9s de HTTP REST, que ofrecen operaciones para consultar Facturas electr\u00f3nicas y tambi\u00e9n permiten el monitoreo de un NFe a trav\u00e9s del servicio Push NFe.","title":"\u00bfQu\u00e9 es la API de consulta NFe?"},{"location":"es/#como-funciona","text":"Para consultar una factura electr\u00f3nica, la parte interesada env\u00eda el n\u00famero NFe y la API devuelve los datos contenidos en esa NFe. Tambi\u00e9n es posible registrar, actualizar y consultar a los clientes que son consumidores de los servicios Push NFe, que pueden incluir, excluir y consultar una solicitud para monitorear las notas fiscales electr\u00f3nicas.","title":"\u00bfComo funciona?"},{"location":"es/#mas-informaciones","text":"\u00bfEst\u00e1 interesado? Para obtener m\u00e1s informaci\u00f3n sobre la API de NFe y otros servicios, visite la p\u00e1gina de la p\u00e1gina de la plataforma de inteligencia empresarial SERPRO .","title":"Mas informaciones"},{"location":"es/#servicio-push-nf-e","text":"El cliente recibe una notificaci\u00f3n, indicando que determina que NF-e ya incluido en una solicitud de monitoreo ha sido actualizado. El cliente debe implementar el tratamiento de los m\u00e9todos Push en su aplicaci\u00f3n.","title":"Servicio Push NF-E"},{"location":"es/api_reference/","text":"","title":"Api reference"},{"location":"es/carimbo_tempo/","text":"Marca de tiempo Solicitud de firma con sello de tiempo Si desea que su solicitud venga con una firma de sello de tiempo, simplemente incluya, en el encabezado de su solicitud, la informaci\u00f3n x-signature: 1. La firma se devolver\u00e1 en el encabezado de la respuesta, con el nombre stamp . Comprobaci\u00f3n de firma con sello de tiempo Para verificar la firma de la marca de tiempo, siga las instrucciones en Verifica la documentaci\u00f3n de la API de marca de tiempo .","title":"Solicitudes de sello de tiempo"},{"location":"es/carimbo_tempo/#marca-de-tiempo","text":"","title":"Marca de tiempo"},{"location":"es/carimbo_tempo/#solicitud-de-firma-con-sello-de-tiempo","text":"Si desea que su solicitud venga con una firma de sello de tiempo, simplemente incluya, en el encabezado de su solicitud, la informaci\u00f3n x-signature: 1. La firma se devolver\u00e1 en el encabezado de la respuesta, con el nombre stamp .","title":"Solicitud de firma con sello de tiempo"},{"location":"es/carimbo_tempo/#comprobacion-de-firma-con-sello-de-tiempo","text":"Para verificar la firma de la marca de tiempo, siga las instrucciones en Verifica la documentaci\u00f3n de la API de marca de tiempo .","title":"Comprobaci\u00f3n de firma con sello de tiempo"},{"location":"es/codigos_retorno/","text":"C\u00f3digos de Retorno Las solicitudes a la API de NFE pueden devolver el siguiente c\u00f3digo HTTP: C\u00f3digos no emitidos Los c\u00f3digos 400 (solicitud no v\u00e1lida) y 500 (error interno del servidor) no se emitir\u00e1n en la facturaci\u00f3n. C\u00f3digo / Respuestas 200 OK Todo funcion\u00f3 como se esperaba y los datos se validaron con \u00e9xito. 206 Contenido parcial La informaci\u00f3n fue devuelta, pero no completamente. 400 Solicitud inv\u00e1lida El n\u00famero de NFE ingresado no es v\u00e1lido. 401 No autorizado Problemas durante la autenticaci\u00f3n. Este error ocurre cuando hay una ruta incorrecta en la solicitud. Aseg\u00farese de llamar a la API de la siguiente manera: \"https://apigateway.serpro.gov.br/consulta-NFE-df/v1/NFE/{ni}\" 404 no encontrado No hay NFE con el n\u00famero de registro informado. 500 Error del servidor Se ha producido un error interno del servidor. 504 Tiempo de espera de puerta de enlace Hubo un error de red y la puerta de enlace no respondi\u00f3 a tiempo. La solicitud no lleg\u00f3 al API Consulta NFE.","title":"C\u00f3digos de retorno"},{"location":"es/codigos_retorno/#codigos-de-retorno","text":"Las solicitudes a la API de NFE pueden devolver el siguiente c\u00f3digo HTTP: C\u00f3digos no emitidos Los c\u00f3digos 400 (solicitud no v\u00e1lida) y 500 (error interno del servidor) no se emitir\u00e1n en la facturaci\u00f3n.","title":"C\u00f3digos de Retorno"},{"location":"es/codigos_retorno/#codigo-respuestas","text":"","title":"C\u00f3digo / Respuestas"},{"location":"es/codigos_retorno/#200-ok","text":"Todo funcion\u00f3 como se esperaba y los datos se validaron con \u00e9xito.","title":"200 OK"},{"location":"es/codigos_retorno/#206-contenido-parcial","text":"La informaci\u00f3n fue devuelta, pero no completamente.","title":"206 Contenido parcial"},{"location":"es/codigos_retorno/#400-solicitud-invalida","text":"El n\u00famero de NFE ingresado no es v\u00e1lido.","title":"400 Solicitud inv\u00e1lida"},{"location":"es/codigos_retorno/#401-no-autorizado","text":"Problemas durante la autenticaci\u00f3n. Este error ocurre cuando hay una ruta incorrecta en la solicitud. Aseg\u00farese de llamar a la API de la siguiente manera: \"https://apigateway.serpro.gov.br/consulta-NFE-df/v1/NFE/{ni}\"","title":"401 No autorizado"},{"location":"es/codigos_retorno/#404-no-encontrado","text":"No hay NFE con el n\u00famero de registro informado.","title":"404 no encontrado"},{"location":"es/codigos_retorno/#500-error-del-servidor","text":"Se ha producido un error interno del servidor.","title":"500 Error del servidor"},{"location":"es/codigos_retorno/#504-tiempo-de-espera-de-puerta-de-enlace","text":"Hubo un error de red y la puerta de enlace no respondi\u00f3 a tiempo. La solicitud no lleg\u00f3 al API Consulta NFE.","title":"504 Tiempo de espera de puerta de enlace"},{"location":"es/como_contratar/","text":"Api Nota Fisca Eletr\u00f4nica puede ser contratada por empresas de cualquier tama\u00f1o, entidades de clase o grupos econ\u00f3micos e instituciones p\u00fablicas. (federales, estatales y municipales). \u00bfTiene inter\u00e9s? Visite la p\u00e1gina Plataforma de Business Intelligence de serpro y haga clic en \"Conozca las consultas\". Paso a paso para contratar Requisito previo Es necesario utilizar el certificado digital e-CNPJ. Haga clic en \"Quiero contratar\" en la P\u00e1gina de consulta de NFe Si ya tiene su registro en Serpro, ingrese su nombre de usuario y contrase\u00f1a. De lo contrario, cree su cuenta para continuar con el proceso de contrataci\u00f3n. Siga el flujo de contrataci\u00f3n. Despu\u00e9s de firmar el contrato, dentro de 10 minutos tendr\u00e1 acceso al \u00c1rea del Cliente (cliente.serpro.gov.br), donde puede ver las claves de acceso al servicio. Ahora solo haga ajustes a su aplicaci\u00f3n y use el servicio. Para ver su historial de uso, acceda al \u00c1rea del cliente. Empresas privadas sin e-CNPJ Recomendamos encarecidamente el uso de un certificado digital, con el cual se puede realizar el proceso de contrataci\u00f3n en l\u00ednea. Para los clientes que no tienen un certificado digital, excepcionalmente, la solicitud se puede hacer a trav\u00e9s de este formulario . En este proceso, la contrataci\u00f3n lleva m\u00e1s tiempo, ya que sigue un procedimiento manual. Organismos p\u00fablicos Si a\u00fan no se ha contactado con Serpro, acceda al formulario de contrato gubernamental , complete los datos y elija Serpro API. Al final del registro, nuestro equipo de servicio recibe la solicitud y designar\u00e1 a una persona para contactarlo. Si ya tiene su asesor comercial en Serpro, simplemente solicite el contrato. Entidades de clase Segue o mesmo fluxo dos \u00f3rg\u00e3os p\u00fablicos. Acesse nosso formul\u00e1rio de contato , preencha os dados e escolha API Serpro. Ao finalizar o cadastro, nosso time de atendimento recebe a solicita\u00e7\u00e3o e ir\u00e1 escalar uma pessoa para entrar em contato Grupos economicos Cuando hay m\u00e1s de un CNPJ de la misma entidad que necesita usar la aplicaci\u00f3n, en lugar de hacer el contrato uno por uno, es posible hacer un contrato global, con sucesivas adhesiones de las otras entidades. Acceda a nuestro formulario de servicio y nuestro equipo de servicio lo contactar\u00e1. C\u00f3mo cancelar El contrato puede cancelarse en cualquier momento, mediante una simple expresi\u00f3n de voluntad a trav\u00e9s de nuestro Call Center .","title":"Como contratar"},{"location":"es/como_contratar/#paso-a-paso-para-contratar","text":"Requisito previo Es necesario utilizar el certificado digital e-CNPJ. Haga clic en \"Quiero contratar\" en la P\u00e1gina de consulta de NFe Si ya tiene su registro en Serpro, ingrese su nombre de usuario y contrase\u00f1a. De lo contrario, cree su cuenta para continuar con el proceso de contrataci\u00f3n. Siga el flujo de contrataci\u00f3n. Despu\u00e9s de firmar el contrato, dentro de 10 minutos tendr\u00e1 acceso al \u00c1rea del Cliente (cliente.serpro.gov.br), donde puede ver las claves de acceso al servicio. Ahora solo haga ajustes a su aplicaci\u00f3n y use el servicio. Para ver su historial de uso, acceda al \u00c1rea del cliente.","title":"Paso a paso para contratar"},{"location":"es/como_contratar/#empresas-privadas-sin-e-cnpj","text":"Recomendamos encarecidamente el uso de un certificado digital, con el cual se puede realizar el proceso de contrataci\u00f3n en l\u00ednea. Para los clientes que no tienen un certificado digital, excepcionalmente, la solicitud se puede hacer a trav\u00e9s de este formulario . En este proceso, la contrataci\u00f3n lleva m\u00e1s tiempo, ya que sigue un procedimiento manual.","title":"Empresas privadas sin e-CNPJ"},{"location":"es/como_contratar/#organismos-publicos","text":"Si a\u00fan no se ha contactado con Serpro, acceda al formulario de contrato gubernamental , complete los datos y elija Serpro API. Al final del registro, nuestro equipo de servicio recibe la solicitud y designar\u00e1 a una persona para contactarlo. Si ya tiene su asesor comercial en Serpro, simplemente solicite el contrato.","title":"Organismos p\u00fablicos"},{"location":"es/como_contratar/#entidades-de-clase","text":"Segue o mesmo fluxo dos \u00f3rg\u00e3os p\u00fablicos. Acesse nosso formul\u00e1rio de contato , preencha os dados e escolha API Serpro. Ao finalizar o cadastro, nosso time de atendimento recebe a solicita\u00e7\u00e3o e ir\u00e1 escalar uma pessoa para entrar em contato","title":"Entidades de clase"},{"location":"es/como_contratar/#grupos-economicos","text":"Cuando hay m\u00e1s de un CNPJ de la misma entidad que necesita usar la aplicaci\u00f3n, en lugar de hacer el contrato uno por uno, es posible hacer un contrato global, con sucesivas adhesiones de las otras entidades. Acceda a nuestro formulario de servicio y nuestro equipo de servicio lo contactar\u00e1.","title":"Grupos economicos"},{"location":"es/como_contratar/#como-cancelar","text":"El contrato puede cancelarse en cualquier momento, mediante una simple expresi\u00f3n de voluntad a trav\u00e9s de nuestro Call Center .","title":"C\u00f3mo cancelar"},{"location":"es/demonstracao/","text":"Demostraci\u00f3n","title":"Demonstracao"},{"location":"es/demonstracao/#demostracion","text":"","title":"Demostraci\u00f3n"},{"location":"es/faq/","text":"Preguntas frecuentes Quiero m\u00e1s informaci\u00f3n sobre la API de NFE, \u00bfd\u00f3nde encontrarla? Acceda al la p\u00e1gina de la plataforma de inteligencia empresarial de SERPRO para obtener m\u00e1s informaci\u00f3n sobre el servicio. Quiero contratar la API de NFE, \u00bfc\u00f3mo lo hago? Acceda a nuestro paso a paso explicando c\u00f3mo contratar . Contrat\u00e9 la API de NFE, \u00bfd\u00f3nde obtengo informaci\u00f3n para usar el servicio? La informaci\u00f3n de su contrato, como el estado de activaci\u00f3n del contrato, Consumer key , Consumer secret , endpoint para ser consumido, enlace a la documentaci\u00f3n, son en su \u00e1rea de clientes en https://cliente.serpro.gov.br \u00bfQu\u00e9 llamadas se cobran a la API de NFE? Todas las solicitudes que devuelvan los c\u00f3digos 200, 206 o 404 ser\u00e1n emitidas. Para ver qu\u00e9 c\u00f3digos devuelve la API de NFE, visite c\u00f3digos de retorno .","title":"Preguntas frecuentes"},{"location":"es/faq/#preguntas-frecuentes","text":"","title":"Preguntas frecuentes"},{"location":"es/faq/#quiero-mas-informacion-sobre-la-api-de-nfe-donde-encontrarla","text":"Acceda al la p\u00e1gina de la plataforma de inteligencia empresarial de SERPRO para obtener m\u00e1s informaci\u00f3n sobre el servicio.","title":"Quiero m\u00e1s informaci\u00f3n sobre la API de NFE, \u00bfd\u00f3nde encontrarla?"},{"location":"es/faq/#quiero-contratar-la-api-de-nfe-como-lo-hago","text":"Acceda a nuestro paso a paso explicando c\u00f3mo contratar .","title":"Quiero contratar la API de NFE, \u00bfc\u00f3mo lo hago?"},{"location":"es/faq/#contrate-la-api-de-nfe-donde-obtengo-informacion-para-usar-el-servicio","text":"La informaci\u00f3n de su contrato, como el estado de activaci\u00f3n del contrato, Consumer key , Consumer secret , endpoint para ser consumido, enlace a la documentaci\u00f3n, son en su \u00e1rea de clientes en https://cliente.serpro.gov.br","title":"Contrat\u00e9 la API de NFE, \u00bfd\u00f3nde obtengo informaci\u00f3n para usar el servicio?"},{"location":"es/faq/#que-llamadas-se-cobran-a-la-api-de-nfe","text":"Todas las solicitudes que devuelvan los c\u00f3digos 200, 206 o 404 ser\u00e1n emitidas. Para ver qu\u00e9 c\u00f3digos devuelve la API de NFE, visite c\u00f3digos de retorno .","title":"\u00bfQu\u00e9 llamadas se cobran a la API de NFE?"},{"location":"es/identificador_requisicoes/","text":"Identificador de solicitud opcional Campo de encabezado de solicitud (X-Request-Tag) Este campo es opcional cuando se utilizan llamadas API y sirve como un identificador de solicitud. Si una empresa necesita, por ejemplo, agrupar el n\u00famero de solicitudes realizadas por cada departamento, puede usar este campo para identificar en la facturaci\u00f3n el n\u00famero de solicitudes para cada elemento del grupo. El campo es texto libre (cadena de hasta 32 caracteres) y no tiene validaci\u00f3n de su contenido. Por lo tanto, corresponde al cliente realizar un seguimiento de la informaci\u00f3n que se env\u00eda a este campo para que el informe de facturaci\u00f3n realice la agrupaci\u00f3n adecuada. Este atributo puede ser utilizado por la entidad de clase y / o grupo econ\u00f3mico en la modalidad global, con un cargo de entidad con el prop\u00f3sito de identificar al asociado que realiza la solicitud. En el caso de entidades de clase o grupos econ\u00f3micos que llevan a cabo el contrato a un costo para el miembro, no es necesario llevar a cabo la agrupaci\u00f3n, ya que cada miembro tendr\u00e1 su propia clave de consumo.","title":"Identificador de solicitud opcional"},{"location":"es/identificador_requisicoes/#identificador-de-solicitud-opcional","text":"","title":"Identificador de solicitud opcional"},{"location":"es/identificador_requisicoes/#campo-de-encabezado-de-solicitud-x-request-tag","text":"Este campo es opcional cuando se utilizan llamadas API y sirve como un identificador de solicitud. Si una empresa necesita, por ejemplo, agrupar el n\u00famero de solicitudes realizadas por cada departamento, puede usar este campo para identificar en la facturaci\u00f3n el n\u00famero de solicitudes para cada elemento del grupo. El campo es texto libre (cadena de hasta 32 caracteres) y no tiene validaci\u00f3n de su contenido. Por lo tanto, corresponde al cliente realizar un seguimiento de la informaci\u00f3n que se env\u00eda a este campo para que el informe de facturaci\u00f3n realice la agrupaci\u00f3n adecuada. Este atributo puede ser utilizado por la entidad de clase y / o grupo econ\u00f3mico en la modalidad global, con un cargo de entidad con el prop\u00f3sito de identificar al asociado que realiza la solicitud. En el caso de entidades de clase o grupos econ\u00f3micos que llevan a cabo el contrato a un costo para el miembro, no es necesario llevar a cabo la agrupaci\u00f3n, ya que cada miembro tendr\u00e1 su propia clave de consumo.","title":"Campo de encabezado de solicitud (X-Request-Tag)"},{"location":"es/leiautes_formatos/","text":"Dise\u00f1os y formatos La informaci\u00f3n NF-e proporcionada est\u00e1 de acuerdo con el dise\u00f1o NF-e, puesto a disposici\u00f3n por la Reuni\u00f3n Nacional de Coordinadores y Administradores Tributarios del Estado (ENCAT). Las Notas t\u00e9cnicas con la informaci\u00f3n de dise\u00f1o del NF-e se pueden encontrar en este enlace ENCAT . La estructura de la devoluci\u00f3n Json sigue las mismas especificaciones que los esquemas XML de los servicios web, disponibles en el enlace NF-e . Los campos de tipo num\u00e9rico se devolver\u00e1n en Json en FORMAT NUMBER . Y si el valor num\u00e9rico del campo es demasiado grande, el retorno puede aparecer en json en el FORMATO DE NOTACI\u00d3N CIENT\u00cdFICA . Depende de la aplicaci\u00f3n que consume el servicio API dar el tratamiento adecuado para los campos num\u00e9ricos.","title":"Dise\u00f1os y formatos"},{"location":"es/leiautes_formatos/#disenos-y-formatos","text":"La informaci\u00f3n NF-e proporcionada est\u00e1 de acuerdo con el dise\u00f1o NF-e, puesto a disposici\u00f3n por la Reuni\u00f3n Nacional de Coordinadores y Administradores Tributarios del Estado (ENCAT). Las Notas t\u00e9cnicas con la informaci\u00f3n de dise\u00f1o del NF-e se pueden encontrar en este enlace ENCAT . La estructura de la devoluci\u00f3n Json sigue las mismas especificaciones que los esquemas XML de los servicios web, disponibles en el enlace NF-e . Los campos de tipo num\u00e9rico se devolver\u00e1n en Json en FORMAT NUMBER . Y si el valor num\u00e9rico del campo es demasiado grande, el retorno puede aparecer en json en el FORMATO DE NOTACI\u00d3N CIENT\u00cdFICA . Depende de la aplicaci\u00f3n que consume el servicio API dar el tratamiento adecuado para los campos num\u00e9ricos.","title":"Dise\u00f1os y formatos"},{"location":"es/quick_start/","text":"Gu\u00edas r\u00e1pidas C\u00f3mo autenticarse con la API de consulta NFe Las API proporcionadas por la plataforma API SERPRO utilizan el protocolo OAuth2 para realizar la autenticaci\u00f3n y autorizaci\u00f3n de acceso de las API contratadas. Siga los pasos a continuaci\u00f3n para autenticar y consumir esta API. 1. Primer paso: obtener la clave del consumidor y el secreto del consumidor Para consumir las API, debe usar los dos c\u00f3digos (Clave del consumidor y Secreto del consumidor) disponibles en el \u00c1rea del cliente. Estos c\u00f3digos se utilizan para identificar el contrato. Las credenciales de acceso deben obtenerse de \u00c1rea de clientes Serpro . Ejemplos de c\u00f3digo: Consumer Key: djaR21PGoYp1iyK2n2ACOH9REdUb Consumer Secret: ObRsAJWOL4fv2Tp27D1vd8fB3Ote Aviso importante Consumer Key y Consumer Secret identifican a su usuario y su contrato con SERPRO. Mantenga esta informaci\u00f3n protegida. 2. Segundo paso: solicitar el token de portador Para consultar las API, es necesario obtener un token de acceso temporal (Portador). Este token tiene un tiempo de caducidad y siempre que caduque, este paso de solicitar un nuevo token de acceso debe repetirse. C\u00f3mo solicitar el token de acceso (portador) Para solicitar el token temporal, es necesario realizar una solicitud HTTP POST al punto final del token https://apigateway.serpro.gov.br/token, informar las credenciales de acceso (consumerKey: consumerSecret) en la Autorizaci\u00f3n de encabezado HTTP, en formato base64, como se muestra a continuaci\u00f3n. [ HEAD ] Authorization : Basic base64 ( Consumer Key : Consumer Secret ) [ HEAD ] Content - Type : application / x - www - form - urlencoded [ POST ] grant_type = client_credentials Para usar en el par\u00e1metro * Autorizaci\u00f3n , es necesario concatenar los c\u00f3digos de Consumer Key e Consumer Secret, separados por el car\u00e1cter \":\", y convertir el resultado a BASE64. En el siguiente ejemplo, se devuelve la cadena ZGphUjIx[...]IzT3RlCg*: echo -n \"djaR21PGoYp1iyK2n2ACOH9REdUb:ObRsAJWOL4fv2Tp27D1vd8fB3Ote\" | base64 Resultado: ZGphUjIxUEdvWXAxaXlLMm4yQUNPSDlSRWRVYjpPYlJzQUpXT0w0ZnYyVHAyN0QxdmQ4ZkIzT3RlCg A continuaci\u00f3n se muestra un ejemplo de una llamada a trav\u00e9s de cUrl: curl -k -d \"grant_type=client_credentials\" \\ -H \"Authorization: Basic ZGphUjIxUEdvWXAxaXlLMm4yQUNPSDlSRWRVYjpPYlJzQUpXT0w0ZnYyVHAyN0QxdmQ4ZkIzT3RlCg\" \\ https://apigateway.serpro.gov.br/token Content-type Si experimenta errores \"415 Unsupported Media Type\" en la llamada de solicitud de token, use el Header \"Content-Type\" con el valor \"application/x-www-form-urlencoded\" [HEAD] Content-type: \"application/x-www-form-urlencoded\" 3. Tercer paso: recibir el token Como resultado del paso anterior, el punto final informar\u00e1 al token de acceso API, en el campo access_token del mensaje json de retorno. Este token debe ser informado en los pr\u00f3ximos pasos. Recibe el token Como resultado, el punto final informar\u00e1 al token de acceso API, en el campo access_token del mensaje de retorno json. Este token debe ser informado en los pr\u00f3ximos pasos. :::json { \"scope\": \"am_application_scope default\", \"token_type\": \"Bearer\", \"expires_in\": 3295, \"access_token\": \"c66a7def1c96f7008a0c397dc588b6d7\" } Renovaci\u00f3n de token de acceso Tenga en cuenta que cada vez que caduque el token de acceso temporal, la gateway devolver\u00e1 un C\u00d3DIGO HTTP 401 despu\u00e9s de realizar una solicitud a una API. En este caso, el segundo paso debe repetirse C\u00f3mo solicitar el token de acceso (portador) para gera\u00e7\u00e3o de um novo token de acesso tempor\u00e1rio. 4. Paso cuatro: hacer una solicitud Consultando las API En posesi\u00f3n del token de acceso, realice la solicitud a la API de prueba de NFe. curl -X GET \"https://apigateway.serpro.gov.br/consulta-nfe-df-trial/v1/nfe/35170608530528000184550000000154301000771561\" \\ -H \"accept: application/json\" \\ -H \"Authorization: Bearer 4e1a1858bdd584fdc077fb7d80f39283\" \\ En el ejemplo anterior, se usaron los siguientes par\u00e1metros: [HEADER] Accept: application/json Informamos el tipo de datos que estamos solicitando, en este caso JSON [HEADER] Authorization: Bearer 4e1a1858bdd584fdc077fb7d80f39283 Informamos el token de acceso recibido [GET] https://apigateway.serpro.gov.br/consulta-nfe-df-trial/api/v1/nfe/35170608530528000184550000000154301000771561 Llamamos a la URL del API y al m\u00e9todo deseado. En este caso, la url base es \"https://apigateway.serpro.gov.br/consulta-nfe-df-trial/v1/\u201d, y el m\u00e9todo es el \"nfe/35170608530528000184550000000154301000771561\". Ejemplo de respuesta esperada: { \"nfeProc\" : { \"protNFe\" : { \"infProt\" : { \"chNFe\" : \"35170608530528000184550000000154301000771561\" } }, \"NFe\" : { \"infNFe\" : { \"infAdic\" : { \"infCpl\" : \"N/PED.: 051542;VL. APRX. TRIB.(FONTE IBPT): ****254.19 **34.12 %\" }, \"det\" : [ { \"nItem\" : 1 , \"prod\" : { \"cEAN\" : \"\" , \"cProd\" : 346 , \"qCom\" : 5 , \"cEANTrib\" : \"\" , \"vUnTrib\" : 149 , \"qTrib\" : 5 , \"vProd\" : 745 , \"xProd\" : \"SULFITE A4 75GR BOREAL (5000FLS)\" , \"vUnCom\" : 149 , \"indTot\" : 1 , \"uTrib\" : \"RS\" , \"NCM\" : 48025610 , \"uCom\" : \"RS\" , \"CFOP\" : 5102 , \"CEST\" : 9999999 }, \"imposto\" : { \"vTotTrib\" : 254.19 , \"ICMS\" : { \"ICMS00\" : { \"modBC\" : 0 , \"orig\" : 0 , \"CST\" : \"00\" , \"vBC\" : 745 , \"vICMS\" : 134.1 , \"pICMS\" : 18 } }, \"COFINS\" : { \"COFINSAliq\" : { \"vCOFINS\" : 22.35 , \"CST\" : \"01\" , \"vBC\" : 745 , \"pCOFINS\" : 3 } }, \"PIS\" : { \"PISAliq\" : { \"vPIS\" : 4.84 , \"CST\" : \"01\" , \"vBC\" : 745 , \"pPIS\" : 0.65 } } } } ], \"total\" : { \"ICMSTot\" : { \"vCOFINS\" : 22.35 , \"vBCST\" : 0 , \"vICMSDeson\" : 0 , \"vProd\" : 745 , \"vSeg\" : 0 , \"vNF\" : 745 , \"vTotTrib\" : 254.19 , \"vPIS\" : 4.84 , \"vBC\" : 745 , \"vST\" : 0 , \"vICMS\" : 134.1 , \"vII\" : 0 , \"vDesc\" : 0 , \"vOutro\" : 0 , \"vIPI\" : 0 , \"vFrete\" : 0 } }, \"cobr\" : { \"dup\" : [ { \"dVenc\" : \"2017-07-05\" , \"nDup\" : \"015430/A\" , \"vDup\" : 372.5 }, { \"dVenc\" : \"2017-07-20\" , \"nDup\" : \"015430/B\" , \"vDup\" : 372.5 } ] }, \"Id\" : \"NFe35170608530528000184550000000154301000771561\" , \"ide\" : { \"tpNF\" : 1 , \"mod\" : 55 , \"indPres\" : 0 , \"tpImp\" : 1 , \"nNF\" : 15430 , \"cMunFG\" : 3550308 , \"procEmi\" : 0 , \"finNFe\" : 1 , \"dhEmi\" : \"2017-06-05T08:31:06-03:00\" , \"tpAmb\" : 1 , \"indFinal\" : 1 , \"idDest\" : 1 , \"tpEmis\" : 1 , \"cDV\" : 9 , \"cUF\" : 35 , \"serie\" : 0 , \"natOp\" : \"VENDA\" , \"cNF\" : \"00077156\" , \"verProc\" : \"3.10.31\" , \"indPag\" : 1 }, \"emit\" : { \"xNome\" : \"COMERCIO DE TESTE LTDA EPP\" , \"CRT\" : 3 , \"xFant\" : \"comerciodeteste@comerciodeteste.com.br\" , \"CNPJ\" : \"56776378000136\" , \"enderEmit\" : { \"fone\" : 995551234 , \"UF\" : \"SP\" , \"xPais\" : \"BRASIL\" , \"cPais\" : 1058 , \"xLgr\" : \"AV FICTICIA\" , \"xMun\" : \"SAO PAULO\" , \"nro\" : 80 , \"cMun\" : 3550308 , \"xBairro\" : \"VILA FICTICIA\" , \"CEP\" : \"00012345\" }, \"IE\" : 123456789123 }, \"dest\" : { \"xNome\" : \"MARIA FICTICIA DOS SANTOS\" , \"CPF\" : 67879577696 , \"enderDest\" : { \"fone\" : 995551234 , \"UF\" : \"SP\" , \"xPais\" : \"BRASIL\" , \"cPais\" : 1058 , \"xLgr\" : \"AV FICTICIA, 1579\" , \"xMun\" : \"SAO PAULO\" , \"nro\" : \".\" , \"cMun\" : 3550308 , \"xBairro\" : \"SANTO AMARO FICTICIO\" , \"CEP\" : \"00033200\" }, \"indIEDest\" : 9 }, \"transp\" : { \"modFrete\" : 0 , \"vol\" : { \"pesoL\" : 116.944 , \"esp\" : \"RESMAS\" , \"qVol\" : 5 , \"pesoB\" : 116.944 }, \"transporta\" : { \"xNome\" : \"TRANSPORTADORA FICTICIA\" } } } }, \"versao\" : 3.1 } } IMPORTANTE La consulta de API de prueba de NFe anterior es solo para fines de demostraci\u00f3n. Las API disponibles y sus respectivas URL (puntos finales) para consumo est\u00e1n disponibles (a trav\u00e9s de la documentaci\u00f3n de sus respectivos swaggers) en la secci\u00f3n Referencia de API . C\u00f3mo usar la API de demostraci\u00f3n de NFe API NFe Demo es el entorno de prueba de la API de NFe, con datos de muestra (simulados), para demostrar el funcionamiento de la API. Para usarlo: Acceda a la API de demostraci\u00f3n de NFe Elija el m\u00e9todo (punto final) para probar Haga clic en Try it Out Inserte los encabezados que desee y / o cambie el contenido del cuerpo de la solicitud Haga clic en Execute Datos de prueba Para probar el entorno de prueba, use uno de los NFe ficticios que se enumeran a continuaci\u00f3n. Llave Comentarios 35170608530528000184550000000154301000771561 35161147508411011603551000077959551093041003 53131205035672000156550010000004991543410167 42140612687276000179550010001505671172228752 35140903608306000202555000001100251571436929 53150337992500000167550010000029521000029516 31150917591579000107550010000014321081035918 35151200991908000104550020000063951000184833 31160906347409006953550110008369841081956475 31170309339936000973550250002397736362483965 35160900623904000335550010028792431858713854 35170300776574000156550020009091941178378523 53160911510448000171550010000106771000187760 52160819015622000111550010000007051300828370 53160621182711000102550010000012921000042921 52160609303953000101550010000008711000045330 53151205642646000196550010000287891000219878 53160713453539000148550010000009101000070190 52151013766790000162550010000028401250000010 53160705642646000196550010000298141000284189 52160400945852000151550010000041771020601080 24190201243220000109550010000007251000007252 24190420412822000197550010000004701000001816 25190400785860000188550010000000061000000868 29190332994770000193550020000000107000000124 33190403282458000179550010001434641841176079 87878774456468954646464654654546545446579312 Esta NFe tiene todas las matrices","title":"Gu\u00edas r\u00e1pidas"},{"location":"es/quick_start/#guias-rapidas","text":"","title":"Gu\u00edas r\u00e1pidas"},{"location":"es/quick_start/#como-autenticarse-con-la-api-de-consulta-nfe","text":"Las API proporcionadas por la plataforma API SERPRO utilizan el protocolo OAuth2 para realizar la autenticaci\u00f3n y autorizaci\u00f3n de acceso de las API contratadas. Siga los pasos a continuaci\u00f3n para autenticar y consumir esta API.","title":"C\u00f3mo autenticarse con la API de consulta NFe"},{"location":"es/quick_start/#1-primer-paso-obtener-la-clave-del-consumidor-y-el-secreto-del-consumidor","text":"Para consumir las API, debe usar los dos c\u00f3digos (Clave del consumidor y Secreto del consumidor) disponibles en el \u00c1rea del cliente. Estos c\u00f3digos se utilizan para identificar el contrato. Las credenciales de acceso deben obtenerse de \u00c1rea de clientes Serpro . Ejemplos de c\u00f3digo: Consumer Key: djaR21PGoYp1iyK2n2ACOH9REdUb Consumer Secret: ObRsAJWOL4fv2Tp27D1vd8fB3Ote Aviso importante Consumer Key y Consumer Secret identifican a su usuario y su contrato con SERPRO. Mantenga esta informaci\u00f3n protegida.","title":"1. Primer paso: obtener la clave del consumidor y el secreto del consumidor"},{"location":"es/quick_start/#2-segundo-paso-solicitar-el-token-de-portador","text":"Para consultar las API, es necesario obtener un token de acceso temporal (Portador). Este token tiene un tiempo de caducidad y siempre que caduque, este paso de solicitar un nuevo token de acceso debe repetirse.","title":"2. Segundo paso: solicitar el token de portador"},{"location":"es/quick_start/#como-solicitar-el-token-de-acceso-portador","text":"Para solicitar el token temporal, es necesario realizar una solicitud HTTP POST al punto final del token https://apigateway.serpro.gov.br/token, informar las credenciales de acceso (consumerKey: consumerSecret) en la Autorizaci\u00f3n de encabezado HTTP, en formato base64, como se muestra a continuaci\u00f3n. [ HEAD ] Authorization : Basic base64 ( Consumer Key : Consumer Secret ) [ HEAD ] Content - Type : application / x - www - form - urlencoded [ POST ] grant_type = client_credentials Para usar en el par\u00e1metro * Autorizaci\u00f3n , es necesario concatenar los c\u00f3digos de Consumer Key e Consumer Secret, separados por el car\u00e1cter \":\", y convertir el resultado a BASE64. En el siguiente ejemplo, se devuelve la cadena ZGphUjIx[...]IzT3RlCg*: echo -n \"djaR21PGoYp1iyK2n2ACOH9REdUb:ObRsAJWOL4fv2Tp27D1vd8fB3Ote\" | base64 Resultado: ZGphUjIxUEdvWXAxaXlLMm4yQUNPSDlSRWRVYjpPYlJzQUpXT0w0ZnYyVHAyN0QxdmQ4ZkIzT3RlCg A continuaci\u00f3n se muestra un ejemplo de una llamada a trav\u00e9s de cUrl: curl -k -d \"grant_type=client_credentials\" \\ -H \"Authorization: Basic ZGphUjIxUEdvWXAxaXlLMm4yQUNPSDlSRWRVYjpPYlJzQUpXT0w0ZnYyVHAyN0QxdmQ4ZkIzT3RlCg\" \\ https://apigateway.serpro.gov.br/token Content-type Si experimenta errores \"415 Unsupported Media Type\" en la llamada de solicitud de token, use el Header \"Content-Type\" con el valor \"application/x-www-form-urlencoded\" [HEAD] Content-type: \"application/x-www-form-urlencoded\"","title":"C\u00f3mo solicitar el token de acceso (portador)"},{"location":"es/quick_start/#3-tercer-paso-recibir-el-token","text":"Como resultado del paso anterior, el punto final informar\u00e1 al token de acceso API, en el campo access_token del mensaje json de retorno. Este token debe ser informado en los pr\u00f3ximos pasos.","title":"3. Tercer paso: recibir el token"},{"location":"es/quick_start/#recibe-el-token","text":"Como resultado, el punto final informar\u00e1 al token de acceso API, en el campo access_token del mensaje de retorno json. Este token debe ser informado en los pr\u00f3ximos pasos. :::json { \"scope\": \"am_application_scope default\", \"token_type\": \"Bearer\", \"expires_in\": 3295, \"access_token\": \"c66a7def1c96f7008a0c397dc588b6d7\" }","title":"Recibe el token"},{"location":"es/quick_start/#renovacion-de-token-de-acceso","text":"Tenga en cuenta que cada vez que caduque el token de acceso temporal, la gateway devolver\u00e1 un C\u00d3DIGO HTTP 401 despu\u00e9s de realizar una solicitud a una API. En este caso, el segundo paso debe repetirse C\u00f3mo solicitar el token de acceso (portador) para gera\u00e7\u00e3o de um novo token de acesso tempor\u00e1rio.","title":"Renovaci\u00f3n de token de acceso"},{"location":"es/quick_start/#4-paso-cuatro-hacer-una-solicitud","text":"","title":"4. Paso cuatro: hacer una solicitud"},{"location":"es/quick_start/#consultando-las-api","text":"En posesi\u00f3n del token de acceso, realice la solicitud a la API de prueba de NFe. curl -X GET \"https://apigateway.serpro.gov.br/consulta-nfe-df-trial/v1/nfe/35170608530528000184550000000154301000771561\" \\ -H \"accept: application/json\" \\ -H \"Authorization: Bearer 4e1a1858bdd584fdc077fb7d80f39283\" \\ En el ejemplo anterior, se usaron los siguientes par\u00e1metros: [HEADER] Accept: application/json Informamos el tipo de datos que estamos solicitando, en este caso JSON [HEADER] Authorization: Bearer 4e1a1858bdd584fdc077fb7d80f39283 Informamos el token de acceso recibido [GET] https://apigateway.serpro.gov.br/consulta-nfe-df-trial/api/v1/nfe/35170608530528000184550000000154301000771561 Llamamos a la URL del API y al m\u00e9todo deseado. En este caso, la url base es \"https://apigateway.serpro.gov.br/consulta-nfe-df-trial/v1/\u201d, y el m\u00e9todo es el \"nfe/35170608530528000184550000000154301000771561\". Ejemplo de respuesta esperada: { \"nfeProc\" : { \"protNFe\" : { \"infProt\" : { \"chNFe\" : \"35170608530528000184550000000154301000771561\" } }, \"NFe\" : { \"infNFe\" : { \"infAdic\" : { \"infCpl\" : \"N/PED.: 051542;VL. APRX. TRIB.(FONTE IBPT): ****254.19 **34.12 %\" }, \"det\" : [ { \"nItem\" : 1 , \"prod\" : { \"cEAN\" : \"\" , \"cProd\" : 346 , \"qCom\" : 5 , \"cEANTrib\" : \"\" , \"vUnTrib\" : 149 , \"qTrib\" : 5 , \"vProd\" : 745 , \"xProd\" : \"SULFITE A4 75GR BOREAL (5000FLS)\" , \"vUnCom\" : 149 , \"indTot\" : 1 , \"uTrib\" : \"RS\" , \"NCM\" : 48025610 , \"uCom\" : \"RS\" , \"CFOP\" : 5102 , \"CEST\" : 9999999 }, \"imposto\" : { \"vTotTrib\" : 254.19 , \"ICMS\" : { \"ICMS00\" : { \"modBC\" : 0 , \"orig\" : 0 , \"CST\" : \"00\" , \"vBC\" : 745 , \"vICMS\" : 134.1 , \"pICMS\" : 18 } }, \"COFINS\" : { \"COFINSAliq\" : { \"vCOFINS\" : 22.35 , \"CST\" : \"01\" , \"vBC\" : 745 , \"pCOFINS\" : 3 } }, \"PIS\" : { \"PISAliq\" : { \"vPIS\" : 4.84 , \"CST\" : \"01\" , \"vBC\" : 745 , \"pPIS\" : 0.65 } } } } ], \"total\" : { \"ICMSTot\" : { \"vCOFINS\" : 22.35 , \"vBCST\" : 0 , \"vICMSDeson\" : 0 , \"vProd\" : 745 , \"vSeg\" : 0 , \"vNF\" : 745 , \"vTotTrib\" : 254.19 , \"vPIS\" : 4.84 , \"vBC\" : 745 , \"vST\" : 0 , \"vICMS\" : 134.1 , \"vII\" : 0 , \"vDesc\" : 0 , \"vOutro\" : 0 , \"vIPI\" : 0 , \"vFrete\" : 0 } }, \"cobr\" : { \"dup\" : [ { \"dVenc\" : \"2017-07-05\" , \"nDup\" : \"015430/A\" , \"vDup\" : 372.5 }, { \"dVenc\" : \"2017-07-20\" , \"nDup\" : \"015430/B\" , \"vDup\" : 372.5 } ] }, \"Id\" : \"NFe35170608530528000184550000000154301000771561\" , \"ide\" : { \"tpNF\" : 1 , \"mod\" : 55 , \"indPres\" : 0 , \"tpImp\" : 1 , \"nNF\" : 15430 , \"cMunFG\" : 3550308 , \"procEmi\" : 0 , \"finNFe\" : 1 , \"dhEmi\" : \"2017-06-05T08:31:06-03:00\" , \"tpAmb\" : 1 , \"indFinal\" : 1 , \"idDest\" : 1 , \"tpEmis\" : 1 , \"cDV\" : 9 , \"cUF\" : 35 , \"serie\" : 0 , \"natOp\" : \"VENDA\" , \"cNF\" : \"00077156\" , \"verProc\" : \"3.10.31\" , \"indPag\" : 1 }, \"emit\" : { \"xNome\" : \"COMERCIO DE TESTE LTDA EPP\" , \"CRT\" : 3 , \"xFant\" : \"comerciodeteste@comerciodeteste.com.br\" , \"CNPJ\" : \"56776378000136\" , \"enderEmit\" : { \"fone\" : 995551234 , \"UF\" : \"SP\" , \"xPais\" : \"BRASIL\" , \"cPais\" : 1058 , \"xLgr\" : \"AV FICTICIA\" , \"xMun\" : \"SAO PAULO\" , \"nro\" : 80 , \"cMun\" : 3550308 , \"xBairro\" : \"VILA FICTICIA\" , \"CEP\" : \"00012345\" }, \"IE\" : 123456789123 }, \"dest\" : { \"xNome\" : \"MARIA FICTICIA DOS SANTOS\" , \"CPF\" : 67879577696 , \"enderDest\" : { \"fone\" : 995551234 , \"UF\" : \"SP\" , \"xPais\" : \"BRASIL\" , \"cPais\" : 1058 , \"xLgr\" : \"AV FICTICIA, 1579\" , \"xMun\" : \"SAO PAULO\" , \"nro\" : \".\" , \"cMun\" : 3550308 , \"xBairro\" : \"SANTO AMARO FICTICIO\" , \"CEP\" : \"00033200\" }, \"indIEDest\" : 9 }, \"transp\" : { \"modFrete\" : 0 , \"vol\" : { \"pesoL\" : 116.944 , \"esp\" : \"RESMAS\" , \"qVol\" : 5 , \"pesoB\" : 116.944 }, \"transporta\" : { \"xNome\" : \"TRANSPORTADORA FICTICIA\" } } } }, \"versao\" : 3.1 } } IMPORTANTE La consulta de API de prueba de NFe anterior es solo para fines de demostraci\u00f3n. Las API disponibles y sus respectivas URL (puntos finales) para consumo est\u00e1n disponibles (a trav\u00e9s de la documentaci\u00f3n de sus respectivos swaggers) en la secci\u00f3n Referencia de API .","title":"Consultando las API"},{"location":"es/quick_start/#como-usar-la-api-de-demostracion-de-nfe","text":"API NFe Demo es el entorno de prueba de la API de NFe, con datos de muestra (simulados), para demostrar el funcionamiento de la API. Para usarlo: Acceda a la API de demostraci\u00f3n de NFe Elija el m\u00e9todo (punto final) para probar Haga clic en Try it Out Inserte los encabezados que desee y / o cambie el contenido del cuerpo de la solicitud Haga clic en Execute","title":"C\u00f3mo usar la API de demostraci\u00f3n de NFe"},{"location":"es/quick_start/#datos-de-prueba","text":"Para probar el entorno de prueba, use uno de los NFe ficticios que se enumeran a continuaci\u00f3n. Llave Comentarios 35170608530528000184550000000154301000771561 35161147508411011603551000077959551093041003 53131205035672000156550010000004991543410167 42140612687276000179550010001505671172228752 35140903608306000202555000001100251571436929 53150337992500000167550010000029521000029516 31150917591579000107550010000014321081035918 35151200991908000104550020000063951000184833 31160906347409006953550110008369841081956475 31170309339936000973550250002397736362483965 35160900623904000335550010028792431858713854 35170300776574000156550020009091941178378523 53160911510448000171550010000106771000187760 52160819015622000111550010000007051300828370 53160621182711000102550010000012921000042921 52160609303953000101550010000008711000045330 53151205642646000196550010000287891000219878 53160713453539000148550010000009101000070190 52151013766790000162550010000028401250000010 53160705642646000196550010000298141000284189 52160400945852000151550010000041771020601080 24190201243220000109550010000007251000007252 24190420412822000197550010000004701000001816 25190400785860000188550010000000061000000868 29190332994770000193550020000000107000000124 33190403282458000179550010001434641841176079 87878774456468954646464654654546545446579312 Esta NFe tiene todas las matrices","title":"Datos de prueba"},{"location":"es/suporte/","text":"Obter suporte Abra um acionamento","title":"Suporte"},{"location":"es/suporte/#obter-suporte","text":"Abra um acionamento","title":"Obter suporte"},{"location":"es/tipos_retornados/","text":"Tipos devueltos por la consulta API NFe Tipos de campos devueltos Tipos de campo Valor de retorno NI N\u00famero de registro en el Registro de contribuyentes individuales, en el formato 99999999999 Nombre Nombre del individuo Situaci\u00f3n Estado de registro de individuos, formado por dos campos: C\u00f3digo y Descripci\u00f3n. Situaci\u00f3n / C\u00f3digo C\u00f3digo de estado de registro de individuos Situaci\u00f3n / Descripci\u00f3n Descripci\u00f3n del estado de registro de individuos Tipos de situaciones de registro devueltas C\u00f3digo Descripci\u00f3n 0 Regular 2 Suspendido 3 Titular fallecido 4 Regularizaci\u00f3n Pendiente 5 Cancelado por multiplicidad 8 Nulo 9 Oficina cancelada","title":"Tipos devueltos"},{"location":"es/tipos_retornados/#tipos-devueltos-por-la-consulta-api-nfe","text":"","title":"Tipos devueltos por la consulta API NFe"},{"location":"es/tipos_retornados/#tipos-de-campos-devueltos","text":"Tipos de campo Valor de retorno NI N\u00famero de registro en el Registro de contribuyentes individuales, en el formato 99999999999 Nombre Nombre del individuo Situaci\u00f3n Estado de registro de individuos, formado por dos campos: C\u00f3digo y Descripci\u00f3n. Situaci\u00f3n / C\u00f3digo C\u00f3digo de estado de registro de individuos Situaci\u00f3n / Descripci\u00f3n Descripci\u00f3n del estado de registro de individuos","title":"Tipos de campos devueltos"},{"location":"es/tipos_retornados/#tipos-de-situaciones-de-registro-devueltas","text":"C\u00f3digo Descripci\u00f3n 0 Regular 2 Suspendido 3 Titular fallecido 4 Regularizaci\u00f3n Pendiente 5 Cancelado por multiplicidad 8 Nulo 9 Oficina cancelada","title":"Tipos de situaciones de registro devueltas"},{"location":"pt/","text":"O que \u00e9 a API Consulta NFe? Os servi\u00e7os da api NFe s\u00e3o disponibilizados atrav\u00e9s do HTTP REST, oferecendo opera\u00e7\u00f5es de consulta \u00e0s Notas Fiscais Eletr\u00f4nicas e tamb\u00e9m permitindo a monitora\u00e7\u00e3o de uma NFe atrav\u00e9s do servi\u00e7o Push NFe. Como funciona? Para consulta a uma Nota Fiscal Eletr\u00f4nica, o interessado envia o n\u00famero da NFe e a API retorna os dados que constam nessa NFe. \u00c9 poss\u00edvel tamb\u00e9m o cadastro, atualiza\u00e7\u00e3o e consulta de clientes consumidores dos servi\u00e7os Push NFe, os quais poder\u00e3o incluir, excluir e consultar uma solicita\u00e7\u00e3o de monitora\u00e7\u00e3o de Notas Fiscis Eletr\u00f4nicas. Mais informa\u00e7\u00f5es Interessado? Para mais informa\u00e7\u00f5es sobre a api NFe e outros servi\u00e7os, acesse a p\u00e1gina da Plataforma de Intelig\u00eancia de Neg\u00f3cios do SERPRO . Servi\u00e7o Push NF-E O cliente recebe uma notifica\u00e7\u00e3o, informando que determina NF-e j\u00e1 inclu\u00edda em uma solici\u00e7\u00e3o de monitora\u00e7\u00e3o teve atualiza\u00e7\u00e3o. O cliente deve implementar em sua aplica\u00e7\u00e3o o tratamento dos m\u00e9todos Push.","title":"Introdu\u00e7\u00e3o"},{"location":"pt/#o-que-e-a-api-consulta-nfe","text":"Os servi\u00e7os da api NFe s\u00e3o disponibilizados atrav\u00e9s do HTTP REST, oferecendo opera\u00e7\u00f5es de consulta \u00e0s Notas Fiscais Eletr\u00f4nicas e tamb\u00e9m permitindo a monitora\u00e7\u00e3o de uma NFe atrav\u00e9s do servi\u00e7o Push NFe.","title":"O que \u00e9 a API Consulta NFe?"},{"location":"pt/#como-funciona","text":"Para consulta a uma Nota Fiscal Eletr\u00f4nica, o interessado envia o n\u00famero da NFe e a API retorna os dados que constam nessa NFe. \u00c9 poss\u00edvel tamb\u00e9m o cadastro, atualiza\u00e7\u00e3o e consulta de clientes consumidores dos servi\u00e7os Push NFe, os quais poder\u00e3o incluir, excluir e consultar uma solicita\u00e7\u00e3o de monitora\u00e7\u00e3o de Notas Fiscis Eletr\u00f4nicas.","title":"Como funciona?"},{"location":"pt/#mais-informacoes","text":"Interessado? Para mais informa\u00e7\u00f5es sobre a api NFe e outros servi\u00e7os, acesse a p\u00e1gina da Plataforma de Intelig\u00eancia de Neg\u00f3cios do SERPRO .","title":"Mais informa\u00e7\u00f5es"},{"location":"pt/#servico-push-nf-e","text":"O cliente recebe uma notifica\u00e7\u00e3o, informando que determina NF-e j\u00e1 inclu\u00edda em uma solici\u00e7\u00e3o de monitora\u00e7\u00e3o teve atualiza\u00e7\u00e3o. O cliente deve implementar em sua aplica\u00e7\u00e3o o tratamento dos m\u00e9todos Push.","title":"Servi\u00e7o Push NF-E"},{"location":"pt/api_reference/","text":"","title":"Api reference"},{"location":"pt/carimbo_tempo/","text":"Carimbo de Tempo Solicitando assinatura com Carimbo de Tempo Caso deseje que sua solicita\u00e7\u00e3o venha com uma assinatura de Carimbo de Tempo, basta incluir, no cabe\u00e7alho de sua requisi\u00e7\u00e3o, a informa\u00e7\u00e3o x-signature: 1. A assinatura ser\u00e1 retornada no cabe\u00e7alho da resposta, com o nome stamp . Verificando assinatura com Carimbo de Tempo Para verificar assinatura de carimbo de tempo, siga as instru\u00e7\u00f5es da documenta\u00e7\u00e3o da API Verifica Carimbo de Tempo .","title":"Requisi\u00e7\u00f5es com Carimbo de Tempo"},{"location":"pt/carimbo_tempo/#carimbo-de-tempo","text":"","title":"Carimbo de Tempo"},{"location":"pt/carimbo_tempo/#solicitando-assinatura-com-carimbo-de-tempo","text":"Caso deseje que sua solicita\u00e7\u00e3o venha com uma assinatura de Carimbo de Tempo, basta incluir, no cabe\u00e7alho de sua requisi\u00e7\u00e3o, a informa\u00e7\u00e3o x-signature: 1. A assinatura ser\u00e1 retornada no cabe\u00e7alho da resposta, com o nome stamp .","title":"Solicitando assinatura com Carimbo de Tempo"},{"location":"pt/carimbo_tempo/#verificando-assinatura-com-carimbo-de-tempo","text":"Para verificar assinatura de carimbo de tempo, siga as instru\u00e7\u00f5es da documenta\u00e7\u00e3o da API Verifica Carimbo de Tempo .","title":"Verificando assinatura com Carimbo de Tempo"},{"location":"pt/codigos_retorno/","text":"C\u00f3digos de Retorno As requisi\u00e7\u00f5es \u00e0 API NFE podem retornar os seguintes c\u00f3digo HTTP: C\u00f3digos n\u00e3o bilhetados Os c\u00f3digos 400, 404, 406 e 500 n\u00e3o ser\u00e3o bilhetados no faturamento. Code / Responses 200 OK Tudo funcionou como esperado e a valida\u00e7\u00e3o dos dados foi realizada com sucesso. 206 Conte\u00fado Parcial As informa\u00e7\u00f5es foram retornadas, mas n\u00e3o completamente. 400 Requisi\u00e7\u00e3o inv\u00e1lida O n\u00famero de NFE informado n\u00e3o \u00e9 v\u00e1lido. 401 N\u00e3o Autorizado Problemas durante a autentica\u00e7\u00e3o. 403 Proibido Este erro ocorre quando h\u00e1 algum caminho errado na requisi\u00e7\u00e3o. Certifique-se de chamar a API da seguinte forma: \"https://apigateway.serpro.gov.br/consulta-NFE-df/v1/NFE/{ni}\" 404 N\u00e3o Encontrado N\u00e3o existe NFE com o n\u00famero de inscri\u00e7\u00e3o informado. 406 Formato Inv\u00e1lido O formato do arquivo de sa\u00edda deve ser Json/Xml. 500 Erro no Servidor Ocorreu algum erro interno no Servidor. 504 Tempo Esgotado do Gateway Ocorreu algum erro de rede e o gateway n\u00e3o respondeu a tempo. A requisi\u00e7\u00e3o n\u00e3o chegou at\u00e9 a API Consulta NFE.","title":"C\u00f3digos de retorno"},{"location":"pt/codigos_retorno/#codigos-de-retorno","text":"As requisi\u00e7\u00f5es \u00e0 API NFE podem retornar os seguintes c\u00f3digo HTTP: C\u00f3digos n\u00e3o bilhetados Os c\u00f3digos 400, 404, 406 e 500 n\u00e3o ser\u00e3o bilhetados no faturamento.","title":"C\u00f3digos de Retorno"},{"location":"pt/codigos_retorno/#code-responses","text":"","title":"Code / Responses"},{"location":"pt/codigos_retorno/#200-ok","text":"Tudo funcionou como esperado e a valida\u00e7\u00e3o dos dados foi realizada com sucesso.","title":"200 OK"},{"location":"pt/codigos_retorno/#206-conteudo-parcial","text":"As informa\u00e7\u00f5es foram retornadas, mas n\u00e3o completamente.","title":"206 Conte\u00fado Parcial"},{"location":"pt/codigos_retorno/#400-requisicao-invalida","text":"O n\u00famero de NFE informado n\u00e3o \u00e9 v\u00e1lido.","title":"400 Requisi\u00e7\u00e3o inv\u00e1lida"},{"location":"pt/codigos_retorno/#401-nao-autorizado","text":"Problemas durante a autentica\u00e7\u00e3o.","title":"401 N\u00e3o Autorizado"},{"location":"pt/codigos_retorno/#403-proibido","text":"Este erro ocorre quando h\u00e1 algum caminho errado na requisi\u00e7\u00e3o. Certifique-se de chamar a API da seguinte forma: \"https://apigateway.serpro.gov.br/consulta-NFE-df/v1/NFE/{ni}\"","title":"403 Proibido"},{"location":"pt/codigos_retorno/#404-nao-encontrado","text":"N\u00e3o existe NFE com o n\u00famero de inscri\u00e7\u00e3o informado.","title":"404 N\u00e3o Encontrado"},{"location":"pt/codigos_retorno/#406-formato-invalido","text":"O formato do arquivo de sa\u00edda deve ser Json/Xml.","title":"406 Formato Inv\u00e1lido"},{"location":"pt/codigos_retorno/#500-erro-no-servidor","text":"Ocorreu algum erro interno no Servidor.","title":"500 Erro no Servidor"},{"location":"pt/codigos_retorno/#504-tempo-esgotado-do-gateway","text":"Ocorreu algum erro de rede e o gateway n\u00e3o respondeu a tempo. A requisi\u00e7\u00e3o n\u00e3o chegou at\u00e9 a API Consulta NFE.","title":"504 Tempo Esgotado do Gateway"},{"location":"pt/como_contratar/","text":"A Api Nota Fisca Eletr\u00f4nica pode ser contratada por empresas de qualquer porte, entidades de classe ou grupos econ\u00f4micos e institui\u00e7\u00f5es p\u00fablicas (federais, estaduais e municipais). Tem interesse? Acesse a p\u00e1gina da Plataforma de Intelig\u00eancia de Neg\u00f3cios do SERPRO, e clique em \"Conhe\u00e7a as Consultas\". Passo a passo para a contrata\u00e7\u00e3o Pr\u00e9-Requisito \u00c9 necess\u00e1rio o uso do certificado digital e-CNPJ. Clique em \"Quero Contratar\" na p\u00e1gina da Consulta NFe Se j\u00e1 tiver seu cadastro no Serpro, entre com seu login e senha. Caso contr\u00e1rio, crie sua conta para prosseguir no processo de contrata\u00e7\u00e3o. Siga o fluxo de contrata\u00e7\u00e3o. Ap\u00f3s assinar o contrato, em at\u00e9 10 minutos j\u00e1 ter\u00e1 acesso \u00e0 \u00c1rea do Cliente (cliente.serpro.gov.br), onde poder\u00e1 visualizar as chaves de acesso ao servi\u00e7o. Agora \u00e9 s\u00f3 fazer os ajustes na sua aplica\u00e7\u00e3o e utilizar o servi\u00e7o. Para ver o seu hist\u00f3rico de uso, acesse a \u00c1rea do Cliente. Empresas privadas sem e-CNPJ Recomendamos fortemente o uso de certificado digital, com o qual pode ser feito o processo de contrata\u00e7\u00e3o online. Para clientes que n\u00e3o possuem certificado digital, excepcionalmente, pode ser feito a solicita\u00e7\u00e3o atrav\u00e9s deste formul\u00e1rio . Neste processo, a contrata\u00e7\u00e3o \u00e9 mais demorada, pois segue um tr\u00e2mite manual. \u00d3rg\u00e3o p\u00fablicos Se ainda n\u00e3o tem contato com o Serpro, acesse o formul\u00e1rio de contrata\u00e7\u00e3o para governo , preencha os dados e escolha API Serpro. Ao finalizar o cadastro, nosso time de atendimento recebe a solicita\u00e7\u00e3o e ir\u00e1 escalar uma pessoa para entrar em contato. Caso j\u00e1 tenha seu Consultor de Neg\u00f3cio no Serpro, basta solicitar o contrato. Entidades de classe Segue o mesmo fluxo dos \u00f3rg\u00e3os p\u00fablicos. Acesse nosso formul\u00e1rio de contato , preencha os dados e escolha API Serpro. Ao finalizar o cadastro, nosso time de atendimento recebe a solicita\u00e7\u00e3o e ir\u00e1 escalar uma pessoa para entrar em contato Grupos Econ\u00f4micos Quando se tem mais de um CNPJ da mesma entidade que necessita utilizar a aplica\u00e7\u00e3o, em vez de fazer o contrato um a um, \u00e9 poss\u00edvel fazer um contrato global, com sucessivas ades\u00f5es dos demais entes. Acesse nosso formul\u00e1rio de atendimento e nossa equipe de atendimento entrar\u00e1 em contato. Como cancelar O contrato pode ser cancelado a qualquer momento, por simples manifesta\u00e7\u00e3o de vontade atrav\u00e9s na nossa Central de Atendimento .","title":"Como contratar"},{"location":"pt/como_contratar/#passo-a-passo-para-a-contratacao","text":"Pr\u00e9-Requisito \u00c9 necess\u00e1rio o uso do certificado digital e-CNPJ. Clique em \"Quero Contratar\" na p\u00e1gina da Consulta NFe Se j\u00e1 tiver seu cadastro no Serpro, entre com seu login e senha. Caso contr\u00e1rio, crie sua conta para prosseguir no processo de contrata\u00e7\u00e3o. Siga o fluxo de contrata\u00e7\u00e3o. Ap\u00f3s assinar o contrato, em at\u00e9 10 minutos j\u00e1 ter\u00e1 acesso \u00e0 \u00c1rea do Cliente (cliente.serpro.gov.br), onde poder\u00e1 visualizar as chaves de acesso ao servi\u00e7o. Agora \u00e9 s\u00f3 fazer os ajustes na sua aplica\u00e7\u00e3o e utilizar o servi\u00e7o. Para ver o seu hist\u00f3rico de uso, acesse a \u00c1rea do Cliente.","title":"Passo a passo para a contrata\u00e7\u00e3o"},{"location":"pt/como_contratar/#empresas-privadas-sem-e-cnpj","text":"Recomendamos fortemente o uso de certificado digital, com o qual pode ser feito o processo de contrata\u00e7\u00e3o online. Para clientes que n\u00e3o possuem certificado digital, excepcionalmente, pode ser feito a solicita\u00e7\u00e3o atrav\u00e9s deste formul\u00e1rio . Neste processo, a contrata\u00e7\u00e3o \u00e9 mais demorada, pois segue um tr\u00e2mite manual.","title":"Empresas privadas sem e-CNPJ"},{"location":"pt/como_contratar/#orgao-publicos","text":"Se ainda n\u00e3o tem contato com o Serpro, acesse o formul\u00e1rio de contrata\u00e7\u00e3o para governo , preencha os dados e escolha API Serpro. Ao finalizar o cadastro, nosso time de atendimento recebe a solicita\u00e7\u00e3o e ir\u00e1 escalar uma pessoa para entrar em contato. Caso j\u00e1 tenha seu Consultor de Neg\u00f3cio no Serpro, basta solicitar o contrato.","title":"\u00d3rg\u00e3o p\u00fablicos"},{"location":"pt/como_contratar/#entidades-de-classe","text":"Segue o mesmo fluxo dos \u00f3rg\u00e3os p\u00fablicos. Acesse nosso formul\u00e1rio de contato , preencha os dados e escolha API Serpro. Ao finalizar o cadastro, nosso time de atendimento recebe a solicita\u00e7\u00e3o e ir\u00e1 escalar uma pessoa para entrar em contato","title":"Entidades de classe"},{"location":"pt/como_contratar/#grupos-economicos","text":"Quando se tem mais de um CNPJ da mesma entidade que necessita utilizar a aplica\u00e7\u00e3o, em vez de fazer o contrato um a um, \u00e9 poss\u00edvel fazer um contrato global, com sucessivas ades\u00f5es dos demais entes. Acesse nosso formul\u00e1rio de atendimento e nossa equipe de atendimento entrar\u00e1 em contato.","title":"Grupos Econ\u00f4micos"},{"location":"pt/como_contratar/#como-cancelar","text":"O contrato pode ser cancelado a qualquer momento, por simples manifesta\u00e7\u00e3o de vontade atrav\u00e9s na nossa Central de Atendimento .","title":"Como cancelar"},{"location":"pt/demonstracao/","text":"Demonstra\u00e7\u00e3o","title":"Demonstra\u00e7\u00e3o"},{"location":"pt/demonstracao/#demonstracao","text":"","title":"Demonstra\u00e7\u00e3o"},{"location":"pt/faq/","text":"Perguntas frequentes - * FAQ * Quero mais informa\u00e7\u00f5es sobre a API do NFE, onde encontr\u00e1-las? Acesse o a p\u00e1gina da Plataforma de Intelig\u00eancia de Neg\u00f3cios SERPRO para mais informa\u00e7\u00f5es sobre o servi\u00e7o. Quero contratar a API do NFE, como fa\u00e7o? Acesse nosso passo a passo explicando como contratar . Contratei a API do NFE, onde obtenho informa\u00e7\u00f5es para usar o servi\u00e7o? Suas informa\u00e7\u00f5es de contrato, como status de ativa\u00e7\u00e3o do contrato, Consumer key , Consumer secret , endpoint consumir, link para documenta\u00e7\u00e3o, est\u00e3o na sua \u00e1rea de cliente em .br Quais chamadas s\u00e3o cobradas na API do NFE? Todas as solicita\u00e7\u00f5es com o c\u00f3digo de retorno 200, 206 ou 404 ser\u00e3o emitidas. Para ver quais c\u00f3digos s\u00e3o retornados pela API do NFE, visite o C\u00f3digos de retorno .","title":"D\u00favidas - FAQ"},{"location":"pt/faq/#perguntas-frequentes-faq","text":"","title":"Perguntas frequentes - * FAQ *"},{"location":"pt/faq/#quero-mais-informacoes-sobre-a-api-do-nfe-onde-encontra-las","text":"Acesse o a p\u00e1gina da Plataforma de Intelig\u00eancia de Neg\u00f3cios SERPRO para mais informa\u00e7\u00f5es sobre o servi\u00e7o.","title":"Quero mais informa\u00e7\u00f5es sobre a API do NFE, onde encontr\u00e1-las?"},{"location":"pt/faq/#quero-contratar-a-api-do-nfe-como-faco","text":"Acesse nosso passo a passo explicando como contratar .","title":"Quero contratar a API do NFE, como fa\u00e7o?"},{"location":"pt/faq/#contratei-a-api-do-nfe-onde-obtenho-informacoes-para-usar-o-servico","text":"Suas informa\u00e7\u00f5es de contrato, como status de ativa\u00e7\u00e3o do contrato, Consumer key , Consumer secret , endpoint consumir, link para documenta\u00e7\u00e3o, est\u00e3o na sua \u00e1rea de cliente em .br","title":"Contratei a API do NFE, onde obtenho informa\u00e7\u00f5es para usar o servi\u00e7o?"},{"location":"pt/faq/#quais-chamadas-sao-cobradas-na-api-do-nfe","text":"Todas as solicita\u00e7\u00f5es com o c\u00f3digo de retorno 200, 206 ou 404 ser\u00e3o emitidas. Para ver quais c\u00f3digos s\u00e3o retornados pela API do NFE, visite o C\u00f3digos de retorno .","title":"Quais chamadas s\u00e3o cobradas na API do NFE?"},{"location":"pt/identificador_requisicoes/","text":"Identificador Opcional de Requisi\u00e7\u00f5es Campo cabe\u00e7alho da requisi\u00e7\u00e3o (X-Request-Tag) Este campo \u00e9 opcional na utiliza\u00e7\u00e3o das chamadas \u00e0 API e serve como identificador de requisi\u00e7\u00f5es. Caso uma empresa necessite, por exemplo, agrupar a quantidade de requisi\u00e7\u00f5es realizadas por cada departamento, poder\u00e1 utilizar este campo de forma a identificar no faturamento a quantidade de requisi\u00e7\u00f5es de cada item agrupador. O campo \u00e9 de texto livre (string at\u00e9 32 caracteres) e n\u00e3o possui valida\u00e7\u00e3o de seu conte\u00fado. Cabe, portanto, ao cliente manter o controle das informa\u00e7\u00f5es que s\u00e3o enviadas para esse campo de forma que o relat\u00f3rio de faturamento fa\u00e7a o agrupamento adequado. Este atributo pode ser usado pela entidade de classe e/ou grupo econ\u00f4mico na modalidade global, com \u00f4nus entidade para fins de identifica\u00e7\u00e3o do associado que realiza a requisi\u00e7\u00e3o. No caso de entidades de classe ou grupos econ\u00f4micos que realizem a contrata\u00e7\u00e3o com \u00f4nus para o associado, n\u00e3o \u00e9 necess\u00e1rio realizar o agrupamento, pois cada associado ir\u00e1 possuir sua pr\u00f3pria chave de consumo.","title":"Identificador opcional de Requisi\u00e7\u00f5es"},{"location":"pt/identificador_requisicoes/#identificador-opcional-de-requisicoes","text":"","title":"Identificador Opcional de Requisi\u00e7\u00f5es"},{"location":"pt/identificador_requisicoes/#campo-cabecalho-da-requisicao-x-request-tag","text":"Este campo \u00e9 opcional na utiliza\u00e7\u00e3o das chamadas \u00e0 API e serve como identificador de requisi\u00e7\u00f5es. Caso uma empresa necessite, por exemplo, agrupar a quantidade de requisi\u00e7\u00f5es realizadas por cada departamento, poder\u00e1 utilizar este campo de forma a identificar no faturamento a quantidade de requisi\u00e7\u00f5es de cada item agrupador. O campo \u00e9 de texto livre (string at\u00e9 32 caracteres) e n\u00e3o possui valida\u00e7\u00e3o de seu conte\u00fado. Cabe, portanto, ao cliente manter o controle das informa\u00e7\u00f5es que s\u00e3o enviadas para esse campo de forma que o relat\u00f3rio de faturamento fa\u00e7a o agrupamento adequado. Este atributo pode ser usado pela entidade de classe e/ou grupo econ\u00f4mico na modalidade global, com \u00f4nus entidade para fins de identifica\u00e7\u00e3o do associado que realiza a requisi\u00e7\u00e3o. No caso de entidades de classe ou grupos econ\u00f4micos que realizem a contrata\u00e7\u00e3o com \u00f4nus para o associado, n\u00e3o \u00e9 necess\u00e1rio realizar o agrupamento, pois cada associado ir\u00e1 possuir sua pr\u00f3pria chave de consumo.","title":"Campo cabe\u00e7alho da requisi\u00e7\u00e3o (X-Request-Tag)"},{"location":"pt/leiautes_formatos/","text":"Leiautes e Formatos As informa\u00e7\u00f5es da NF-e disponibilizadas est\u00e3o de acordo com o leiaute da NF-e, disponibilizado pelo Encontro Nacional de Coordenadores e Administradores Tribut\u00e1rios Estaduais (ENCAT). As Notas T\u00e9cnicas com as informa\u00e7\u00f5es de leiaute da NF-e est\u00e3o nesse link do ENCAT . A estrutura do Json de retorno seguem as mesmas especifica\u00e7\u00f5es dos esquemas XML dos Web Services, disponibilizados no link NF-e . Os campos do tipo num\u00e9rico ser\u00e3o retornados no Json no FORMATO NUMBER . E caso o valor num\u00e9rico do campo seja um valor muito grande, o retorno poder\u00e1 aparecer no json no FORMATO DE NOTA\u00c7\u00c3O CIENT\u00cdFICA . Cabe a aplica\u00e7\u00e3o que consome o servi\u00e7o da API dar o tratamento adequado para campos num\u00e9ricos.","title":"Leiautes e Formatos"},{"location":"pt/leiautes_formatos/#leiautes-e-formatos","text":"As informa\u00e7\u00f5es da NF-e disponibilizadas est\u00e3o de acordo com o leiaute da NF-e, disponibilizado pelo Encontro Nacional de Coordenadores e Administradores Tribut\u00e1rios Estaduais (ENCAT). As Notas T\u00e9cnicas com as informa\u00e7\u00f5es de leiaute da NF-e est\u00e3o nesse link do ENCAT . A estrutura do Json de retorno seguem as mesmas especifica\u00e7\u00f5es dos esquemas XML dos Web Services, disponibilizados no link NF-e . Os campos do tipo num\u00e9rico ser\u00e3o retornados no Json no FORMATO NUMBER . E caso o valor num\u00e9rico do campo seja um valor muito grande, o retorno poder\u00e1 aparecer no json no FORMATO DE NOTA\u00c7\u00c3O CIENT\u00cdFICA . Cabe a aplica\u00e7\u00e3o que consome o servi\u00e7o da API dar o tratamento adequado para campos num\u00e9ricos.","title":"Leiautes e Formatos"},{"location":"pt/quick_start/","text":"Guias r\u00e1pidos Como autenticar na API Consulta NFe As APIs disponibilizadas pela plataforma API SERPRO utilizam o protocolo OAuth2 para realizar a autentica\u00e7\u00e3o e autoriza\u00e7\u00e3o de acesso das APIs contratadas. Siga os passos abaixo para se autenticar e consumir essa API. 1. Primeiro passo - Obtenha Consumer Key e Consumer Secret Para consumir as APIs, voc\u00ea dever\u00e1 utilizar os dois c\u00f3digos (Consumer Key e Consumer Secret) disponibilizados na \u00c1rea do Cliente. Esses c\u00f3digos servem para identificar o contrato. As credenciais de acesso devem ser obtidas a partir da \u00e1rea do cliente Serpro . Exemplos de c\u00f3digos: Consumer Key: djaR21PGoYp1iyK2n2ACOH9REdUb Consumer Secret: ObRsAJWOL4fv2Tp27D1vd8fB3Ote Aviso importante O Consumer Key e Consumer Secret identificam seu usu\u00e1rio e seu contrato com o SERPRO. Mantenha essas informa\u00e7\u00f5es protegidas. 2. Segundo passo - Solicite o Bearer Token Para consultar as APIs, \u00e9 necess\u00e1rio obter um token de acesso tempor\u00e1rio (Bearer). Esse token possui um tempo de validade e sempre que expirado, este passo de requisi\u00e7\u00e3o de um novo token de acesso deve ser repetido. Como solicitar o Token de Acesso (Bearer) Para solicitar o token tempor\u00e1rio \u00e9 necess\u00e1rio realizar uma requisi\u00e7\u00e3o HTTP POST para o endpoint Token https://apigateway.serpro.gov.br/token, informando as credenciais de acesso (consumerKey:consumerSecret) no HTTP Header Authorization, no formato base64, conforme exemplo abaixo. [ HEAD ] Authorization : Basic base64 ( Consumer Key : Consumer Secret ) [ HEAD ] Content - Type : application / x - www - form - urlencoded [ POST ] grant_type = client_credentials Para utiliza\u00e7\u00e3o no par\u00e2metro Authorization , \u00e9 necess\u00e1rio concatenar os c\u00f3digos Consumer Key e Consumer Secret, separados pelo caracter \":\", e converter o resultado em BASE64. No exemplo a seguir, \u00e9 retornada a string ZGphUjIx[...]IzT3RlCg : echo -n \"djaR21PGoYp1iyK2n2ACOH9REdUb:ObRsAJWOL4fv2Tp27D1vd8fB3Ote\" | base64 Resultado: ZGphUjIxUEdvWXAxaXlLMm4yQUNPSDlSRWRVYjpPYlJzQUpXT0w0ZnYyVHAyN0QxdmQ4ZkIzT3RlCg Abaixo segue um exemplo de chamada via cUrl: curl -k -d \"grant_type=client_credentials\" \\ -H \"Authorization: Basic ZGphUjIxUEdvWXAxaXlLMm4yQUNPSDlSRWRVYjpPYlJzQUpXT0w0ZnYyVHAyN0QxdmQ4ZkIzT3RlCg\" \\ https://apigateway.serpro.gov.br/token Content-type Caso experiencie erros de \"415 Unsupported Media Type\" na chamada de solicita\u00e7\u00e3o do Token, utilize o campo do Header \"Content-Type\" com o valor \"application/x-www-form-urlencoded\" [HEAD] Content-type: \"application/x-www-form-urlencoded\" 3. Terceiro passo - Receba o Token Como resultado do passo anterior, o endpoint informar\u00e1 o token de acesso a API, no campo access_token da mensagem json de retorno. Este token deve ser informado nos pr\u00f3ximos passos. Receba o Token Como resultado, o endpoint informar\u00e1 o token de acesso a API, no campo access_token da mensagem json de retorno. Este token deve ser informado nos pr\u00f3ximos passos. { \"scope\" : \"am_application_scope default\" , \"token_type\" : \"Bearer\" , \"expires_in\" : 3295 , \"access_token\" : \"c66a7def1c96f7008a0c397dc588b6d7\" } Renova\u00e7\u00e3o do Token de Acesso Atentar que sempre que o token de acesso tempor\u00e1rio expirar, o gateway vai retornar um HTTP CODE 401 ap\u00f3s realizar uma requisi\u00e7\u00e3o para uma API. Neste caso, deve ser repetido o Segundo Passo Como solicitar o Token de Acesso (Bearer) para gera\u00e7\u00e3o de um novo token de acesso tempor\u00e1rio. 4. Quarto passo - Fazendo uma requisi\u00e7\u00e3o Realizando consulta \u00e0s APIs De posse do Token de Acesso, fa\u00e7a a requisi\u00e7\u00e3o a API NFe Trial. curl -X GET \"https://apigateway.serpro.gov.br/consulta-nfe-df-trial/v1/nfe/35170608530528000184550000000154301000771561\" \\ -H \"accept: application/json\" \\ -H \"Authorization: Bearer 4e1a1858bdd584fdc077fb7d80f39283\" \\ No exemplo acima foram utilizados os seguintes par\u00e2metros: [HEADER] Accept: application/json Informamos o tipo de dados que estamos requerendo, nesse caso JSON [HEADER] Authorization: Bearer 4e1a1858bdd584fdc077fb7d80f39283 Informamos o token de acesso recebido [GET] https://apigateway.serpro.gov.br/consulta-nfe-df-trial/api/v1/nfe/35170608530528000184550000000154301000771561 Chamamos a url da API e o m\u00e9todo desejado. No caso, a url base \u00e9 \"https://apigateway.serpro.gov.br/consulta-nfe-df-trial/v1/\u201d, e o m\u00e9todo \u00e9 o \"nfe/35170608530528000184550000000154301000771561\". Exemplo de resposta esperada: { \"nfeProc\" : { \"protNFe\" : { \"infProt\" : { \"chNFe\" : \"35170608530528000184550000000154301000771561\" } }, \"NFe\" : { \"infNFe\" : { \"infAdic\" : { \"infCpl\" : \"N/PED.: 051542;VL. APRX. TRIB.(FONTE IBPT): ****254.19 **34.12 %\" }, \"det\" : [ { \"nItem\" : 1 , \"prod\" : { \"cEAN\" : \"\" , \"cProd\" : 346 , \"qCom\" : 5 , \"cEANTrib\" : \"\" , \"vUnTrib\" : 149 , \"qTrib\" : 5 , \"vProd\" : 745 , \"xProd\" : \"SULFITE A4 75GR BOREAL (5000FLS)\" , \"vUnCom\" : 149 , \"indTot\" : 1 , \"uTrib\" : \"RS\" , \"NCM\" : 48025610 , \"uCom\" : \"RS\" , \"CFOP\" : 5102 , \"CEST\" : 9999999 }, \"imposto\" : { \"vTotTrib\" : 254.19 , \"ICMS\" : { \"ICMS00\" : { \"modBC\" : 0 , \"orig\" : 0 , \"CST\" : \"00\" , \"vBC\" : 745 , \"vICMS\" : 134.1 , \"pICMS\" : 18 } }, \"COFINS\" : { \"COFINSAliq\" : { \"vCOFINS\" : 22.35 , \"CST\" : \"01\" , \"vBC\" : 745 , \"pCOFINS\" : 3 } }, \"PIS\" : { \"PISAliq\" : { \"vPIS\" : 4.84 , \"CST\" : \"01\" , \"vBC\" : 745 , \"pPIS\" : 0.65 } } } } ], \"total\" : { \"ICMSTot\" : { \"vCOFINS\" : 22.35 , \"vBCST\" : 0 , \"vICMSDeson\" : 0 , \"vProd\" : 745 , \"vSeg\" : 0 , \"vNF\" : 745 , \"vTotTrib\" : 254.19 , \"vPIS\" : 4.84 , \"vBC\" : 745 , \"vST\" : 0 , \"vICMS\" : 134.1 , \"vII\" : 0 , \"vDesc\" : 0 , \"vOutro\" : 0 , \"vIPI\" : 0 , \"vFrete\" : 0 } }, \"cobr\" : { \"dup\" : [ { \"dVenc\" : \"2017-07-05\" , \"nDup\" : \"015430/A\" , \"vDup\" : 372.5 }, { \"dVenc\" : \"2017-07-20\" , \"nDup\" : \"015430/B\" , \"vDup\" : 372.5 } ] }, \"Id\" : \"NFe35170608530528000184550000000154301000771561\" , \"ide\" : { \"tpNF\" : 1 , \"mod\" : 55 , \"indPres\" : 0 , \"tpImp\" : 1 , \"nNF\" : 15430 , \"cMunFG\" : 3550308 , \"procEmi\" : 0 , \"finNFe\" : 1 , \"dhEmi\" : \"2017-06-05T08:31:06-03:00\" , \"tpAmb\" : 1 , \"indFinal\" : 1 , \"idDest\" : 1 , \"tpEmis\" : 1 , \"cDV\" : 9 , \"cUF\" : 35 , \"serie\" : 0 , \"natOp\" : \"VENDA\" , \"cNF\" : \"00077156\" , \"verProc\" : \"3.10.31\" , \"indPag\" : 1 }, \"emit\" : { \"xNome\" : \"COMERCIO DE TESTE LTDA EPP\" , \"CRT\" : 3 , \"xFant\" : \"comerciodeteste@comerciodeteste.com.br\" , \"CNPJ\" : \"56776378000136\" , \"enderEmit\" : { \"fone\" : 995551234 , \"UF\" : \"SP\" , \"xPais\" : \"BRASIL\" , \"cPais\" : 1058 , \"xLgr\" : \"AV FICTICIA\" , \"xMun\" : \"SAO PAULO\" , \"nro\" : 80 , \"cMun\" : 3550308 , \"xBairro\" : \"VILA FICTICIA\" , \"CEP\" : \"00012345\" }, \"IE\" : 123456789123 }, \"dest\" : { \"xNome\" : \"MARIA FICTICIA DOS SANTOS\" , \"CPF\" : 67879577696 , \"enderDest\" : { \"fone\" : 995551234 , \"UF\" : \"SP\" , \"xPais\" : \"BRASIL\" , \"cPais\" : 1058 , \"xLgr\" : \"AV FICTICIA, 1579\" , \"xMun\" : \"SAO PAULO\" , \"nro\" : \".\" , \"cMun\" : 3550308 , \"xBairro\" : \"SANTO AMARO FICTICIO\" , \"CEP\" : \"00033200\" }, \"indIEDest\" : 9 }, \"transp\" : { \"modFrete\" : 0 , \"vol\" : { \"pesoL\" : 116.944 , \"esp\" : \"RESMAS\" , \"qVol\" : 5 , \"pesoB\" : 116.944 }, \"transporta\" : { \"xNome\" : \"TRANSPORTADORA FICTICIA\" } } } }, \"versao\" : 3.1 } } IMPORTANTE A chamada \u00e0 consulta da API NFe Trial acima \u00e9 apenas para demonstra\u00e7\u00e3o. As APIs dispon\u00edveis e suas respectivas URLs (endpoints) para consumo s\u00e3o disponibilizadas (atrav\u00e9s da documenta\u00e7\u00e3o dos seus respectivos swaggers) na se\u00e7\u00e3o Refer\u00eancia da API . Como utilizar a API NFe Demonstra\u00e7\u00e3o API NFe Demonstra\u00e7\u00e3o \u00e9 o ambiente de testes da API NFe, com dados de exemplo (Mock), com objetivo de demonstrar o funcionamento da API. Para utiliz\u00e1-lo: Acesse o API NFe Demonstra\u00e7\u00e3o Escolha o m\u00e9todo (endpoint) a testar Clique em Try it Out Insira os cabe\u00e7alhos que desejar e/ou altere o conte\u00fado do corpo da requisi\u00e7\u00e3o Clique em Execute Dados para testes Para testar o ambiente Trial, utilize um das NFe fict\u00edcias listadas abaixo. Chave Observa\u00e7\u00f5es 35170608530528000184550000000154301000771561 35161147508411011603551000077959551093041003 53131205035672000156550010000004991543410167 42140612687276000179550010001505671172228752 35140903608306000202555000001100251571436929 53150337992500000167550010000029521000029516 31150917591579000107550010000014321081035918 35151200991908000104550020000063951000184833 31160906347409006953550110008369841081956475 31170309339936000973550250002397736362483965 35160900623904000335550010028792431858713854 35170300776574000156550020009091941178378523 53160911510448000171550010000106771000187760 52160819015622000111550010000007051300828370 53160621182711000102550010000012921000042921 52160609303953000101550010000008711000045330 53151205642646000196550010000287891000219878 53160713453539000148550010000009101000070190 52151013766790000162550010000028401250000010 53160705642646000196550010000298141000284189 52160400945852000151550010000041771020601080 24190201243220000109550010000007251000007252 24190420412822000197550010000004701000001816 25190400785860000188550010000000061000000868 29190332994770000193550020000000107000000124 33190403282458000179550010001434641841176079 87878774456468954646464654654546545446579312 Essa NFe possui todos os array","title":"Guias r\u00e1pidos"},{"location":"pt/quick_start/#guias-rapidos","text":"","title":"Guias r\u00e1pidos"},{"location":"pt/quick_start/#como-autenticar-na-api-consulta-nfe","text":"As APIs disponibilizadas pela plataforma API SERPRO utilizam o protocolo OAuth2 para realizar a autentica\u00e7\u00e3o e autoriza\u00e7\u00e3o de acesso das APIs contratadas. Siga os passos abaixo para se autenticar e consumir essa API.","title":"Como autenticar na API Consulta NFe"},{"location":"pt/quick_start/#1-primeiro-passo-obtenha-consumer-key-e-consumer-secret","text":"Para consumir as APIs, voc\u00ea dever\u00e1 utilizar os dois c\u00f3digos (Consumer Key e Consumer Secret) disponibilizados na \u00c1rea do Cliente. Esses c\u00f3digos servem para identificar o contrato. As credenciais de acesso devem ser obtidas a partir da \u00e1rea do cliente Serpro . Exemplos de c\u00f3digos: Consumer Key: djaR21PGoYp1iyK2n2ACOH9REdUb Consumer Secret: ObRsAJWOL4fv2Tp27D1vd8fB3Ote Aviso importante O Consumer Key e Consumer Secret identificam seu usu\u00e1rio e seu contrato com o SERPRO. Mantenha essas informa\u00e7\u00f5es protegidas.","title":"1. Primeiro passo - Obtenha Consumer Key e Consumer Secret"},{"location":"pt/quick_start/#2-segundo-passo-solicite-o-bearer-token","text":"Para consultar as APIs, \u00e9 necess\u00e1rio obter um token de acesso tempor\u00e1rio (Bearer). Esse token possui um tempo de validade e sempre que expirado, este passo de requisi\u00e7\u00e3o de um novo token de acesso deve ser repetido.","title":"2. Segundo passo - Solicite o Bearer Token"},{"location":"pt/quick_start/#como-solicitar-o-token-de-acesso-bearer","text":"Para solicitar o token tempor\u00e1rio \u00e9 necess\u00e1rio realizar uma requisi\u00e7\u00e3o HTTP POST para o endpoint Token https://apigateway.serpro.gov.br/token, informando as credenciais de acesso (consumerKey:consumerSecret) no HTTP Header Authorization, no formato base64, conforme exemplo abaixo. [ HEAD ] Authorization : Basic base64 ( Consumer Key : Consumer Secret ) [ HEAD ] Content - Type : application / x - www - form - urlencoded [ POST ] grant_type = client_credentials Para utiliza\u00e7\u00e3o no par\u00e2metro Authorization , \u00e9 necess\u00e1rio concatenar os c\u00f3digos Consumer Key e Consumer Secret, separados pelo caracter \":\", e converter o resultado em BASE64. No exemplo a seguir, \u00e9 retornada a string ZGphUjIx[...]IzT3RlCg : echo -n \"djaR21PGoYp1iyK2n2ACOH9REdUb:ObRsAJWOL4fv2Tp27D1vd8fB3Ote\" | base64 Resultado: ZGphUjIxUEdvWXAxaXlLMm4yQUNPSDlSRWRVYjpPYlJzQUpXT0w0ZnYyVHAyN0QxdmQ4ZkIzT3RlCg Abaixo segue um exemplo de chamada via cUrl: curl -k -d \"grant_type=client_credentials\" \\ -H \"Authorization: Basic ZGphUjIxUEdvWXAxaXlLMm4yQUNPSDlSRWRVYjpPYlJzQUpXT0w0ZnYyVHAyN0QxdmQ4ZkIzT3RlCg\" \\ https://apigateway.serpro.gov.br/token Content-type Caso experiencie erros de \"415 Unsupported Media Type\" na chamada de solicita\u00e7\u00e3o do Token, utilize o campo do Header \"Content-Type\" com o valor \"application/x-www-form-urlencoded\" [HEAD] Content-type: \"application/x-www-form-urlencoded\"","title":"Como solicitar o Token de Acesso (Bearer)"},{"location":"pt/quick_start/#3-terceiro-passo-receba-o-token","text":"Como resultado do passo anterior, o endpoint informar\u00e1 o token de acesso a API, no campo access_token da mensagem json de retorno. Este token deve ser informado nos pr\u00f3ximos passos.","title":"3. Terceiro passo - Receba o Token"},{"location":"pt/quick_start/#receba-o-token","text":"Como resultado, o endpoint informar\u00e1 o token de acesso a API, no campo access_token da mensagem json de retorno. Este token deve ser informado nos pr\u00f3ximos passos. { \"scope\" : \"am_application_scope default\" , \"token_type\" : \"Bearer\" , \"expires_in\" : 3295 , \"access_token\" : \"c66a7def1c96f7008a0c397dc588b6d7\" }","title":"Receba o Token"},{"location":"pt/quick_start/#renovacao-do-token-de-acesso","text":"Atentar que sempre que o token de acesso tempor\u00e1rio expirar, o gateway vai retornar um HTTP CODE 401 ap\u00f3s realizar uma requisi\u00e7\u00e3o para uma API. Neste caso, deve ser repetido o Segundo Passo Como solicitar o Token de Acesso (Bearer) para gera\u00e7\u00e3o de um novo token de acesso tempor\u00e1rio.","title":"Renova\u00e7\u00e3o do Token de Acesso"},{"location":"pt/quick_start/#4-quarto-passo-fazendo-uma-requisicao","text":"","title":"4. Quarto passo - Fazendo uma requisi\u00e7\u00e3o"},{"location":"pt/quick_start/#realizando-consulta-as-apis","text":"De posse do Token de Acesso, fa\u00e7a a requisi\u00e7\u00e3o a API NFe Trial. curl -X GET \"https://apigateway.serpro.gov.br/consulta-nfe-df-trial/v1/nfe/35170608530528000184550000000154301000771561\" \\ -H \"accept: application/json\" \\ -H \"Authorization: Bearer 4e1a1858bdd584fdc077fb7d80f39283\" \\ No exemplo acima foram utilizados os seguintes par\u00e2metros: [HEADER] Accept: application/json Informamos o tipo de dados que estamos requerendo, nesse caso JSON [HEADER] Authorization: Bearer 4e1a1858bdd584fdc077fb7d80f39283 Informamos o token de acesso recebido [GET] https://apigateway.serpro.gov.br/consulta-nfe-df-trial/api/v1/nfe/35170608530528000184550000000154301000771561 Chamamos a url da API e o m\u00e9todo desejado. No caso, a url base \u00e9 \"https://apigateway.serpro.gov.br/consulta-nfe-df-trial/v1/\u201d, e o m\u00e9todo \u00e9 o \"nfe/35170608530528000184550000000154301000771561\". Exemplo de resposta esperada: { \"nfeProc\" : { \"protNFe\" : { \"infProt\" : { \"chNFe\" : \"35170608530528000184550000000154301000771561\" } }, \"NFe\" : { \"infNFe\" : { \"infAdic\" : { \"infCpl\" : \"N/PED.: 051542;VL. APRX. TRIB.(FONTE IBPT): ****254.19 **34.12 %\" }, \"det\" : [ { \"nItem\" : 1 , \"prod\" : { \"cEAN\" : \"\" , \"cProd\" : 346 , \"qCom\" : 5 , \"cEANTrib\" : \"\" , \"vUnTrib\" : 149 , \"qTrib\" : 5 , \"vProd\" : 745 , \"xProd\" : \"SULFITE A4 75GR BOREAL (5000FLS)\" , \"vUnCom\" : 149 , \"indTot\" : 1 , \"uTrib\" : \"RS\" , \"NCM\" : 48025610 , \"uCom\" : \"RS\" , \"CFOP\" : 5102 , \"CEST\" : 9999999 }, \"imposto\" : { \"vTotTrib\" : 254.19 , \"ICMS\" : { \"ICMS00\" : { \"modBC\" : 0 , \"orig\" : 0 , \"CST\" : \"00\" , \"vBC\" : 745 , \"vICMS\" : 134.1 , \"pICMS\" : 18 } }, \"COFINS\" : { \"COFINSAliq\" : { \"vCOFINS\" : 22.35 , \"CST\" : \"01\" , \"vBC\" : 745 , \"pCOFINS\" : 3 } }, \"PIS\" : { \"PISAliq\" : { \"vPIS\" : 4.84 , \"CST\" : \"01\" , \"vBC\" : 745 , \"pPIS\" : 0.65 } } } } ], \"total\" : { \"ICMSTot\" : { \"vCOFINS\" : 22.35 , \"vBCST\" : 0 , \"vICMSDeson\" : 0 , \"vProd\" : 745 , \"vSeg\" : 0 , \"vNF\" : 745 , \"vTotTrib\" : 254.19 , \"vPIS\" : 4.84 , \"vBC\" : 745 , \"vST\" : 0 , \"vICMS\" : 134.1 , \"vII\" : 0 , \"vDesc\" : 0 , \"vOutro\" : 0 , \"vIPI\" : 0 , \"vFrete\" : 0 } }, \"cobr\" : { \"dup\" : [ { \"dVenc\" : \"2017-07-05\" , \"nDup\" : \"015430/A\" , \"vDup\" : 372.5 }, { \"dVenc\" : \"2017-07-20\" , \"nDup\" : \"015430/B\" , \"vDup\" : 372.5 } ] }, \"Id\" : \"NFe35170608530528000184550000000154301000771561\" , \"ide\" : { \"tpNF\" : 1 , \"mod\" : 55 , \"indPres\" : 0 , \"tpImp\" : 1 , \"nNF\" : 15430 , \"cMunFG\" : 3550308 , \"procEmi\" : 0 , \"finNFe\" : 1 , \"dhEmi\" : \"2017-06-05T08:31:06-03:00\" , \"tpAmb\" : 1 , \"indFinal\" : 1 , \"idDest\" : 1 , \"tpEmis\" : 1 , \"cDV\" : 9 , \"cUF\" : 35 , \"serie\" : 0 , \"natOp\" : \"VENDA\" , \"cNF\" : \"00077156\" , \"verProc\" : \"3.10.31\" , \"indPag\" : 1 }, \"emit\" : { \"xNome\" : \"COMERCIO DE TESTE LTDA EPP\" , \"CRT\" : 3 , \"xFant\" : \"comerciodeteste@comerciodeteste.com.br\" , \"CNPJ\" : \"56776378000136\" , \"enderEmit\" : { \"fone\" : 995551234 , \"UF\" : \"SP\" , \"xPais\" : \"BRASIL\" , \"cPais\" : 1058 , \"xLgr\" : \"AV FICTICIA\" , \"xMun\" : \"SAO PAULO\" , \"nro\" : 80 , \"cMun\" : 3550308 , \"xBairro\" : \"VILA FICTICIA\" , \"CEP\" : \"00012345\" }, \"IE\" : 123456789123 }, \"dest\" : { \"xNome\" : \"MARIA FICTICIA DOS SANTOS\" , \"CPF\" : 67879577696 , \"enderDest\" : { \"fone\" : 995551234 , \"UF\" : \"SP\" , \"xPais\" : \"BRASIL\" , \"cPais\" : 1058 , \"xLgr\" : \"AV FICTICIA, 1579\" , \"xMun\" : \"SAO PAULO\" , \"nro\" : \".\" , \"cMun\" : 3550308 , \"xBairro\" : \"SANTO AMARO FICTICIO\" , \"CEP\" : \"00033200\" }, \"indIEDest\" : 9 }, \"transp\" : { \"modFrete\" : 0 , \"vol\" : { \"pesoL\" : 116.944 , \"esp\" : \"RESMAS\" , \"qVol\" : 5 , \"pesoB\" : 116.944 }, \"transporta\" : { \"xNome\" : \"TRANSPORTADORA FICTICIA\" } } } }, \"versao\" : 3.1 } } IMPORTANTE A chamada \u00e0 consulta da API NFe Trial acima \u00e9 apenas para demonstra\u00e7\u00e3o. As APIs dispon\u00edveis e suas respectivas URLs (endpoints) para consumo s\u00e3o disponibilizadas (atrav\u00e9s da documenta\u00e7\u00e3o dos seus respectivos swaggers) na se\u00e7\u00e3o Refer\u00eancia da API .","title":"Realizando consulta \u00e0s APIs"},{"location":"pt/quick_start/#como-utilizar-a-api-nfe-demonstracao","text":"API NFe Demonstra\u00e7\u00e3o \u00e9 o ambiente de testes da API NFe, com dados de exemplo (Mock), com objetivo de demonstrar o funcionamento da API. Para utiliz\u00e1-lo: Acesse o API NFe Demonstra\u00e7\u00e3o Escolha o m\u00e9todo (endpoint) a testar Clique em Try it Out Insira os cabe\u00e7alhos que desejar e/ou altere o conte\u00fado do corpo da requisi\u00e7\u00e3o Clique em Execute","title":"Como utilizar a API NFe Demonstra\u00e7\u00e3o"},{"location":"pt/quick_start/#dados-para-testes","text":"Para testar o ambiente Trial, utilize um das NFe fict\u00edcias listadas abaixo. Chave Observa\u00e7\u00f5es 35170608530528000184550000000154301000771561 35161147508411011603551000077959551093041003 53131205035672000156550010000004991543410167 42140612687276000179550010001505671172228752 35140903608306000202555000001100251571436929 53150337992500000167550010000029521000029516 31150917591579000107550010000014321081035918 35151200991908000104550020000063951000184833 31160906347409006953550110008369841081956475 31170309339936000973550250002397736362483965 35160900623904000335550010028792431858713854 35170300776574000156550020009091941178378523 53160911510448000171550010000106771000187760 52160819015622000111550010000007051300828370 53160621182711000102550010000012921000042921 52160609303953000101550010000008711000045330 53151205642646000196550010000287891000219878 53160713453539000148550010000009101000070190 52151013766790000162550010000028401250000010 53160705642646000196550010000298141000284189 52160400945852000151550010000041771020601080 24190201243220000109550010000007251000007252 24190420412822000197550010000004701000001816 25190400785860000188550010000000061000000868 29190332994770000193550020000000107000000124 33190403282458000179550010001434641841176079 87878774456468954646464654654546545446579312 Essa NFe possui todos os array","title":"Dados para testes"},{"location":"pt/suporte/","text":"Obter suporte Abra um acionamento","title":"Suporte"},{"location":"pt/suporte/#obter-suporte","text":"Abra um acionamento","title":"Obter suporte"},{"location":"pt/tipos_retornados/","text":"Tipos retornados pela API Consulta NFe Tipos de Campos Retornados Tipos de campos Valor de retorno NI N\u00famero de Inscri\u00e7\u00e3o no Cadastro de Pessoa F\u00edsica, no formato 99999999999 Nome Nome da Pessoa F\u00edsica Situa\u00e7\u00e3o Situa\u00e7\u00e3o Cadastral da Pessoa F\u00edsica, formada por dois campos: C\u00f3digo e Descri\u00e7\u00e3o. Situa\u00e7\u00e3o/C\u00f3digo C\u00f3digo da Situa\u00e7\u00e3o Cadastral da Pessoa F\u00edsica Situa\u00e7\u00e3o/Descri\u00e7\u00e3o Descri\u00e7\u00e3o da Situa\u00e7\u00e3o Cadastral da Pessoa F\u00edsica Tipos de Situa\u00e7\u00e3o Cadastral Retornados C\u00f3digo Descri\u00e7\u00e3o 0 Regular 2 Suspensa 3 Titular Falecido 4 Pendente de Regulariza\u00e7\u00e3o 5 Cancelada por Multiplicidade 8 Nula 9 Cancelada de Of\u00edcio","title":"Tipos retornados"},{"location":"pt/tipos_retornados/#tipos-retornados-pela-api-consulta-nfe","text":"","title":"Tipos retornados pela API Consulta NFe"},{"location":"pt/tipos_retornados/#tipos-de-campos-retornados","text":"Tipos de campos Valor de retorno NI N\u00famero de Inscri\u00e7\u00e3o no Cadastro de Pessoa F\u00edsica, no formato 99999999999 Nome Nome da Pessoa F\u00edsica Situa\u00e7\u00e3o Situa\u00e7\u00e3o Cadastral da Pessoa F\u00edsica, formada por dois campos: C\u00f3digo e Descri\u00e7\u00e3o. Situa\u00e7\u00e3o/C\u00f3digo C\u00f3digo da Situa\u00e7\u00e3o Cadastral da Pessoa F\u00edsica Situa\u00e7\u00e3o/Descri\u00e7\u00e3o Descri\u00e7\u00e3o da Situa\u00e7\u00e3o Cadastral da Pessoa F\u00edsica","title":"Tipos de Campos Retornados"},{"location":"pt/tipos_retornados/#tipos-de-situacao-cadastral-retornados","text":"C\u00f3digo Descri\u00e7\u00e3o 0 Regular 2 Suspensa 3 Titular Falecido 4 Pendente de Regulariza\u00e7\u00e3o 5 Cancelada por Multiplicidade 8 Nula 9 Cancelada de Of\u00edcio","title":"Tipos de Situa\u00e7\u00e3o Cadastral Retornados"}]}